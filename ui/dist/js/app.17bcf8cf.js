(function(e){function t(t){for(var s,r,c=t[0],o=t[1],l=t[2],d=0,f=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,c=1;c<a.length;c++){var o=a[c];0!==i[o]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},n=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0a5e":function(e,t,a){"use strict";var s=a("1e01"),i=a.n(s);i.a},"1c2e":function(e,t,a){"use strict";var s=a("3fba"),i=a.n(s);i.a},"1e01":function(e,t,a){},"37d4":function(e,t,a){"use strict";var s=a("39fe"),i=a.n(s);i.a},"39fe":function(e,t,a){},"3d32":function(e,t,a){},"3f9a":function(e,t,a){},"3fba":function(e,t,a){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="4678"},"51ef":function(e,t,a){"use strict";var s=a("3d32"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=a("ecee"),n=a("c074"),r=a("ad3d"),c=a("f206"),o=a.n(c),l=a("5698"),u=a("b85c"),d=(a("96cf"),a("1da1")),f=a("2f62"),v=a("bc3a"),m=a.n(v),h=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home w-full flex",class:[e.hue]},[a("div",{staticClass:"center-panel w-full"},[e.selectedSite?e._e():a("div",{staticClass:"no-info flex justify-end"},[a("div",{staticClass:"main w-full"},[e._m(0),a("div",{staticClass:"content text-left"},[a("font-awesome-icon",{attrs:{icon:"lightbulb"}}),a("span",[e._v("First, select your working site to start your registration.")])],1)])]),e.startsOfMonth.length>0?a("div",{staticClass:"months"},e._l(e.startsOfMonth,(function(e){return a("div",{key:e},[a("CalendarEditor",{attrs:{startOfMonth:e}})],1)})),0):e._e()]),a("div",{staticClass:"right-panel select-none overflow-y-auto"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"building"}}),e._v(" Site")],1),a("v-select",{attrs:{value:e.selectedSite,options:e.siteDefinitions,label:"name"},on:{input:e.setSelectedSite},scopedSlots:e._u([{key:"option",fn:function(t){return[a("h3",{staticStyle:{margin:"0"}},[e._v(e._s(t.name))]),a("div",{staticClass:"description"},[e._v(e._s(t.description))]),a("div",{staticClass:"tag"},[e._v(e._s(t.path))])]}}])}),a("div",{staticClass:"booking-panel-wrapper"},[a("BookingPanel")],1)],1)])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title flex justify-between"},[a("div",[a("span",{staticClass:"onsite"},[e._v("#OnSite")]),a("span",{staticClass:"management"},[e._v("Management")])]),a("div",{staticClass:"arrow-right"})])}],b=(a("4160"),a("c975"),a("b0c0"),a("159b"),a("5530")),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"calendarEditor select-none",class:[e.hue]},[a("div",{staticClass:"title text-left"},[e._v(e._s(e.monthName))]),e._m(0),e.calendarData?a("div",{staticClass:"content px-4"},e._l(e.calendarData,(function(t,s){return a("div",{key:s,staticClass:"week flex"},e._l(t,(function(t,i){return a("div",{key:t.day,staticClass:"day-col day",class:{notADay:!t.day,beforeNow:"beforeNow"==t.status,notOpen:!t.usage,selected:t.selected,right:6==i,left:0==i,bottom:s==e.calendarData.length-1},on:{click:function(a){return e.updateSelectStatus(t)}}},[a("div",{staticClass:"dayValue"},[e._v(e._s(t.day))]),t.currentUserUsage?a("div",{staticClass:"currentUserUsage"},[(t.currentUserUsage.onSite||t.currentUserUsage.arrival)&&e.getSettingProperty("manageOnSites")&&!e.getSettingProperty("manageArrivals")||t.currentUserUsage.onSite&&!t.currentUserUsage.arrival&&e.getSettingProperty("manageArrivals")?a("div",{staticClass:"text-right"},[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1):e._e(),t.currentUserUsage.arrival&&e.getSettingProperty("manageArrivals")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plane-arrival"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.arrival))+" ")],1):e._e(),t.currentUserUsage.restaurant&&e.getSettingProperty("manageRestaurants")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"drumstick-bite"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.restaurant))+" ")],1):e._e(),t.currentUserUsage.departure&&e.getSettingProperty("manageDepartures")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plane-departure"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.departure))+" ")],1):e._e(),t.currentUserUsage.car&&e.getSettingProperty("manageParkings")?a("div",{staticClass:"text-right"},[a("font-awesome-icon",{attrs:{icon:"car"}})],1):e._e(),t.currentUserUsage.moto&&e.getSettingProperty("manageParkings")?a("div",{staticClass:"text-right"},[a("font-awesome-icon",{attrs:{icon:"motorcycle"}})],1):e._e()]):e._e()])})),0)})),0):e._e()])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header flex w-full px-4"},[a("div",{staticClass:"day-col"},[e._v("Mon")]),a("div",{staticClass:"day-col"},[e._v("Tue")]),a("div",{staticClass:"day-col"},[e._v("Wed")]),a("div",{staticClass:"day-col"},[e._v("Thu")]),a("div",{staticClass:"day-col"},[e._v("Fri")]),a("div",{staticClass:"day-col"},[e._v("Sat")]),a("div",{staticClass:"day-col"},[e._v("Sun")])])}],C=(a("a434"),a("d3b7"),a("25f0"),a("c1df")),y=a.n(C),S=new s["a"],k=S,j={store:$e,props:["startOfMonth"],computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","siteUsages","settings","selectedSite","currentUserUsages"])),{},{monthName:function(){return this.startOfMonth?y()(this.startOfMonth).format("MMMM"):null}}),watch:{siteUsages:function(e){this.updateCalendarData(e,this.currentUserUsages),this.$forceUpdate()},currentUserUsages:function(e){this.updateCalendarData(this.siteUsages,e),this.$forceUpdate()}},beforeMount:function(){this.updateCalendarData(this.siteUsages,this.currentUserUsages)},data:function(){return{calendarData:null,selectedDays:[]}},mounted:function(){var e=this;k.$on("clearDaySelections",(function(){e.selectedDays=[],e.$forceUpdate()}))},methods:{getAsTime:function(e){if(e){var t=e.toString();return 1030==e?"> 10:30":700==e?"< 7:30":e>=1e3?t.substring(0,2)+":"+t.substring(2):t.substring(0,1)+":"+t.substring(1)}return e},getSettingProperty:function(e){if(this.settings){var t,a=Object(u["a"])(this.settings);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.key==e)return"true"==s.value}}catch(i){a.e(i)}finally{a.f()}}return!1},updateCalendarData:function(e,t){var a=this,s=y()();if(e&&t&&a.startOfMonth){for(var i=[],n=[{},{},{},{},{},{},{}],r=y()(a.startOfMonth),c=r.clone().endOf("month"),o=r.clone();!o.isAfter(c);o=o.clone().add(1,"days"))n[o.isoWeekday()-1].day=o.date(),o.isBefore(s)&&(n[o.isoWeekday()-1].status="beforeNow"),7==o.isoWeekday()&&(i.push(n),n=[{},{},{},{},{},{},{}]);n[0].day&&i.push(n);var l,d=Object(u["a"])(e);try{for(d.s();!(l=d.n()).done;){var f=l.value,v=y()(f.date);if(v.clone().startOf("month").isSame(r)){var m,h=Object(u["a"])(i);try{for(h.s();!(m=h.n()).done;){var p,g=m.value,b=Object(u["a"])(g);try{for(b.s();!(p=b.n()).done;){var w=p.value;v.date()==w.day&&(w.usage=f)}}catch(D){b.e(D)}finally{b.f()}}}catch(D){h.e(D)}finally{h.f()}}}}catch(D){d.e(D)}finally{d.f()}var _,C=Object(u["a"])(t);try{for(C.s();!(_=C.n()).done;){var S=_.value,k=y()(S.date);if(k.clone().startOf("month").isSame(r)){var j,x=Object(u["a"])(i);try{for(x.s();!(j=x.n()).done;){var R,O=j.value,E=Object(u["a"])(O);try{for(E.s();!(R=E.n()).done;){var U=R.value;k.date()==U.day&&a.selectedSite&&S.site&&a.selectedSite.id==S.site.id&&(U.currentUserUsage=S)}}catch(D){E.e(D)}finally{E.f()}}}catch(D){x.e(D)}finally{x.f()}}}}catch(D){C.e(D)}finally{C.f()}a.calendarData=i}},updateSelectStatus:function(e){var t=this;if(e.selected){e.selected=!1;var a=t.selectedDays.indexOf(e);a>=0&&(t.selectedDays.splice(a,1),k.$emit("selectedDays",{startOfMonth:t.startOfMonth,selectedDays:t.selectedDays}),this.$forceUpdate())}else e.day&&"beforeNow"!=e.status&&e.usage&&(e.selected=!0,t.selectedDays.push(e),k.$emit("selectedDays",{startOfMonth:t.startOfMonth,selectedDays:t.selectedDays}),this.$forceUpdate())}}},x=j,R=(a("0a5e"),a("2877")),O=Object(R["a"])(x,w,_,!1,null,"14d31ae4",null),E=O.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.hue],attrs:{id:"booking"}},[e.selectedSite&&e.getDayCount()>0?[!e.getSettingProperty("manageOnSites")||e.getSettingProperty("manageArrivals")||e.getSettingProperty("manageDepartures")?e._e():a("div",{staticClass:"onSites"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}}),e._v(" On Site ")],1),a("div",{staticClass:"content"},[e.isAvailable("onSite")?[a("div",{staticClass:"item ok",class:{selected:1==e.onSite},on:{click:function(t){e.onSite=!e.onSite}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" present ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" present ")],1)]],2)]),e.getSettingProperty("manageArrivals")?a("div",{staticClass:"arrivals"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"plane-arrival"}}),e._v(" Arrival ")],1),a("div",{staticClass:"content"},[e.isAvailable("h700")?[a("div",{staticClass:"item ok",class:{selected:700==e.arrival},on:{click:function(t){e.arrival=700!=e.arrival?700:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" before 7:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" before 7:30 ")],1)],e.isAvailable("h730")?[a("div",{staticClass:"item ok",class:{selected:730==e.arrival},on:{click:function(t){e.arrival=730!=e.arrival?730:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 7:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 8:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 7:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 8:00 ")],1)],e.isAvailable("h800")?[a("div",{staticClass:"item ok",class:{selected:800==e.arrival},on:{click:function(t){e.arrival=800!=e.arrival?800:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 8:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 8:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 8:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 8:30 ")],1)],e.isAvailable("h830")?[a("div",{staticClass:"item ok",class:{selected:830==e.arrival},on:{click:function(t){e.arrival=830!=e.arrival?830:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 8:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 9:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 8:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 9:00 ")],1)],e.isAvailable("h900")?[a("div",{staticClass:"item ok",class:{selected:900==e.arrival},on:{click:function(t){e.arrival=900!=e.arrival?900:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 9:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 9:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 9:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 9:30 ")],1)],e.isAvailable("h930")?[a("div",{staticClass:"item ok",class:{selected:930==e.arrival},on:{click:function(t){e.arrival=930!=e.arrival?930:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 9:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 10:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 9:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 10:00 ")],1)],e.isAvailable("h1000")?[a("div",{staticClass:"item ok last",class:{selected:1e3==e.arrival},on:{click:function(t){e.arrival=(e.arrival=1e3)?1e3:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 10:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 10:30 ")],1)]:[a("div",{staticClass:"item ko last"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 10:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 10:30 ")],1)],e.isAvailable("h1030")?[a("div",{staticClass:"item ok last",class:{selected:1030==e.arrival},on:{click:function(t){e.arrival=(e.arrival=1030)?1030:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" after 10:30 ")],1)]:[a("div",{staticClass:"item ko last"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" after 10:30 ")],1)]],2)]):e._e(),e.getSettingProperty("manageRestaurants")?a("div",{staticClass:"restaurants"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"drumstick-bite"}}),e._v(" Lunch ")],1),a("div",{staticClass:"content"},[e.isAvailable("h1130")?[a("div",{staticClass:"item ok",class:{selected:1130==e.lunch},on:{click:function(t){e.lunch=1130!=e.lunch?1130:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 11:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 12:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 11:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 12:00 ")],1)],e.isAvailable("h1200")?[a("div",{staticClass:"item ok",class:{selected:1200==e.lunch},on:{click:function(t){e.lunch=1200!=e.lunch?1200:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 12:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 12:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 12:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 12:30 ")],1)],e.isAvailable("h1230")?[a("div",{staticClass:"item ok",class:{selected:1230==e.lunch},on:{click:function(t){e.lunch=1230!=e.lunch?1230:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 12:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 13:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 12:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 13:00 ")],1)],e.isAvailable("h1300")?[a("div",{staticClass:"item ok",class:{selected:1300==e.lunch},on:{click:function(t){e.lunch=1300!=e.lunch?1300:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 13:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 13:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 13:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 13:30 ")],1)],e.isAvailable("h1330")?[a("div",{staticClass:"item ok last",class:{selected:1330==e.lunch},on:{click:function(t){e.lunch=1330!=e.lunch?1330:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 13:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 14:00 ")],1)]:[a("div",{staticClass:"item ko last"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 13:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 14:00 ")],1)]],2)]):e._e(),e.getSettingProperty("manageDepartures")?a("div",{staticClass:"departures"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"plane-departure"}}),e._v(" Departure ")],1),a("div",{staticClass:"content"},[e.isAvailable("h1700")?[a("div",{staticClass:"item ok",class:{selected:1700==e.departure},on:{click:function(t){e.departure=1700!=e.departure?1700:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 17:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 17:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 17:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 17:30 ")],1)],e.isAvailable("h1730")?[a("div",{staticClass:"item ok",class:{selected:1730==e.departure},on:{click:function(t){e.departure=1730!=e.departure?1730:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 17:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 18:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 17:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 18:00 ")],1)],e.isAvailable("h1800")?[a("div",{staticClass:"item ok",class:{selected:1800==e.departure},on:{click:function(t){e.departure=1800!=e.departure?1800:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 18:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 18:30 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 18:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 18:30 ")],1)],e.isAvailable("h1830")?[a("div",{staticClass:"item ok",class:{selected:1830==e.departure},on:{click:function(t){e.departure=1830!=e.departure?1830:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 18:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 19:00 ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 18:30 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 19:00 ")],1)],e.isAvailable("h1900")?[a("div",{staticClass:"item ok last",class:{selected:1900==e.departure},on:{click:function(t){e.departure=1900!=e.departure?1900:null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" 19:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 19:30 ")],1)]:[a("div",{staticClass:"item ko last"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" 19:00 "),a("font-awesome-icon",{attrs:{icon:"arrow-right"}}),e._v(" 19:30 ")],1)]],2)]):e._e(),e.getSettingProperty("manageParkings")?a("div",{staticClass:"parkings"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"parking"}}),e._v(" Parking ")],1),a("div",{staticClass:"content"},[e.isAvailable("car")?[a("div",{staticClass:"item ok",class:{selected:"car"==e.parking},on:{click:function(t){e.parking="car"!=e.parking?"car":null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" "),a("font-awesome-icon",{attrs:{icon:"car"}}),e._v(" car ")],1)]:[a("div",{staticClass:"item ko"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" "),a("font-awesome-icon",{attrs:{icon:"car"}}),e._v(" car ")],1)],e.isAvailable("moto")?[a("div",{staticClass:"item ok last",class:{selected:"moto"==e.parking},on:{click:function(t){e.parking="moto"!=e.parking?"moto":null}}},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"check-circle"}}),e._v(" "),a("font-awesome-icon",{attrs:{icon:"motorcycle"}}),e._v(" motorcycle ")],1)]:[a("div",{staticClass:"item ko last"},[a("font-awesome-icon",{staticClass:"status",attrs:{icon:"times-circle"}}),e._v(" "),a("font-awesome-icon",{attrs:{icon:"motorcycle"}}),e._v(" motorcycle ")],1)]],2)]):e._e()]:e._e(),e.getDayCount()>0?a("div",{staticClass:"actions flex justify-end"},[a("div",{staticClass:"button delete",on:{click:function(t){return e.deleteBookings()}}},[e._v("remove")]),a("div",{staticClass:"button",on:{click:function(t){return e.saveBookings()}}},[e._v("save")])]):e._e()],2)},D=[],A={store:$e,computed:Object(b["a"])({},Object(f["b"])(["hue","currentUser","selectedSite","settings"])),watch:{selectedSite:function(){this.days={}}},data:function(){return{days:{},arrivalValues:["h700","h730","h800","h830","h900","h930","h1000","h1030"],arrival:null,lunch:null,departure:null,parking:null,onSite:null}},mounted:function(){var e=this;k.$on("selectedDays",(function(t){e.days[t.startOfMonth]=t.selectedDays,e.arrival=null,e.lunch=null,e.departure=null,e.parking=null,e.onSite=!1,e.$forceUpdate()})),k.$on("clearPendingActions",(function(){e.days={},e.$forceUpdate(),k.$emit("clearDaySelections")}))},methods:{getDayCount:function(){var e=0;for(var t in this.days)e+=this.days[t].length;return e},getSettingProperty:function(e){if(this.settings){var t,a=Object(u["a"])(this.settings);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.key==e)return"true"==s.value}}catch(i){a.e(i)}finally{a.f()}}return!1},isAvailable:function(e){if(0==this.getDayCount())return!1;for(var t in this.days){var a,s=Object(u["a"])(this.days[t]);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(i.usage[e]-i.usage[e+"_u"]<=0)return!1}}catch(n){s.e(n)}finally{s.f()}}return!(this.arrivalValues.indexOf(e)>=0&&this.getSettingProperty("manageOnSites"))||this.isAvailable("onSite")},saveBookings:function(){var e=this;if(!e.getSettingProperty("manageOnSites")||e.onSite||e.arrival)if(e.getSettingProperty("manageArrivals")&&!e.arrival)$e.commit("SET_INFO","Error: missing arrival info");else if(e.getSettingProperty("manageDepartures")&&!e.departure)$e.commit("SET_INFO","Error: missing departure info");else{var t=[],a=y()();for(var s in this.days){var i=y()(s);i.isBefore(a)&&(a=i);var n,r=Object(u["a"])(this.days[s]);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.push({user:e.currentUser,site:{id:e.selectedSite.id},date:c.usage.date,arrival:e.arrival,moto:"moto"==e.parking,car:"car"==e.parking,restaurant:e.lunch,departure:e.departure,onSite:e.onSite||!!e.arrival})}}catch(o){r.e(o)}finally{r.f()}}$e.dispatch("saveCurrentUserUsages",{user:e.currentUser,site:e.selectedSite.id,startDate:a.format("YYYY-MM-DD"),workingDays:t}),e.days={},k.$emit("clearDaySelections")}else $e.commit("SET_INFO","Error: missing presence information...")},deleteBookings:function(){var e=this,t=[],a=y()();for(var s in this.days){var i=y()(s);i.isBefore(a)&&(a=i);var n,r=Object(u["a"])(this.days[s]);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.push({user:e.currentUser,site:{id:e.selectedSite.id},date:c.usage.date})}}catch(o){r.e(o)}finally{r.f()}}$e.dispatch("deleteCurrentUserUsages",{user:e.currentUser,site:e.selectedSite.id,startDate:a.format("YYYY-MM-DD"),workingDays:t}),e.days={},k.$emit("clearDaySelections")}}},N=A,P=(a("1c2e"),Object(R["a"])(N,U,D,!1,null,"4fde38f4",null)),T=P.exports,I={name:"Home",store:$e,components:{CalendarEditor:E,BookingPanel:T},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","siteDefinitions","selectedSite","siteUsages"])),{},{startsOfMonth:function(){var e,t=[],a=Object(u["a"])(this.siteUsages);try{for(a.s();!(e=a.n()).done;){var s=e.value,i=y()(s.date).startOf("month").format("YYYY-MM-DD");t.indexOf(i)<0&&t.push(i)}}catch(n){a.e(n)}finally{a.f()}return t.sort(),t}}),watch:{siteDefinitions:function(e){this.updateListSites(e)}},data:function(){return{listSites:null}},beforeMount:function(){this.siteDefinitions&&this.updateListSites(this.siteDefinitions)},methods:{updateListSites:function(e){var t=this;e&&(this.listSites=[],e.forEach((function(e){t.listSites.push({code:e.id,label:e.name})})))},setSelectedSite:function(e){$e.dispatch("changeSelectedSite",e)}}},F=I,M=(a("9223"),Object(R["a"])(F,p,g,!1,null,"dfad6764",null)),$=M.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",class:[e.hue],attrs:{id:"settings"}},[a("div",{staticClass:"wrapper w-full"},[a("div",{staticClass:"section features w-2/3"},[a("div",{staticClass:"title text-left pl-3 flex justify-between"},[a("div",[e._v("Management features")]),a("div",{staticClass:"actions"},[a("div",{staticClass:"button save",on:{click:function(t){return e.saveSettings()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1)])]),a("div",{staticClass:"content"},[a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageOnSites,callback:function(t){e.manageOnSites=t},expression:"manageOnSites"}}),a("div",{staticClass:"comment"},[e._v("On site")])],1),a("div",{staticClass:"item flex odd"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageArrivals,callback:function(t){e.manageArrivals=t},expression:"manageArrivals"}}),a("div",{staticClass:"comment"},[e._v("Arrivals")])],1),a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageDepartures,callback:function(t){e.manageDepartures=t},expression:"manageDepartures"}}),a("div",{staticClass:"comment"},[e._v("Departures")])],1),a("div",{staticClass:"item flex odd"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageParkings,callback:function(t){e.manageParkings=t},expression:"manageParkings"}}),a("div",{staticClass:"comment"},[e._v("Parkings")])],1),a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageRestaurants,callback:function(t){e.manageRestaurants=t},expression:"manageRestaurants"}}),a("div",{staticClass:"comment"},[e._v("Restaurants")])],1)])]),a("div",{staticClass:"section users w-2/3"},[a("div",{staticClass:"title text-left pl-3 flex justify-between"},[a("div",[e._v("Users management")]),a("div",{staticClass:"actions flex"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"appareance-none pl-2 rounded border focus:outline-none",attrs:{placeholder:"filter..."},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadUsers()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1),a("div",{staticClass:"button save",on:{click:function(t){return e.saveUsers()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1)])]),a("div",{staticClass:"content"},e._l(e.roles,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"role-title flex justify-between"},[a("div",{staticClass:"value"},[e._v(e._s(s))]),a("div",{staticClass:"actions flex"},[e.editedRole!=s?[a("div",{staticClass:"button save",on:{click:function(t){return e.editUsers(s)}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1)]:e._e(),e.editedRole==s?[a("div",{staticClass:"button save",on:{click:function(t){return e.cancelUsersEdition()}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" cancel ")],1),a("div",{staticClass:"button save",on:{click:function(t){return e.saveUsersEdition()}}},[a("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" ok ")],1)]:e._e()],2)]),e.editedRole==s?a("div",{staticClass:"user-editor-wrapper"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editedUsers,expression:"editedUsers"}],staticClass:"w-full user-editor",attrs:{placeholder:"ajoutez plusieurs lignes"},domProps:{value:e.editedUsers},on:{input:function(t){t.target.composing||(e.editedUsers=t.target.value)}}})]):e._e(),a("div",{staticClass:"users flex flex-wrap"},[e._l(t,(function(t){return[e.isFiltered(t,e.filter)?a("div",{key:t.name,staticClass:"user",class:[t.status]},[e._v(e._s(t.name))]):e._e()]}))],2)])})),0)])])])},z=[],V=(a("ac1f"),a("5319"),a("1276"),{name:"Settings",store:$e,computed:Object(b["a"])({},Object(f["b"])(["hue","settings","userRoles"])),data:function(){return{manageOnSites:null,manageArrivals:null,manageDepartures:null,manageParkings:null,manageRestaurants:null,roles:null,filter:null,editedRole:null,editedUsers:null}},watch:{settings:function(e){this.updateFromSettings(e)},userRoles:function(e){this.updateFromUserRoles(e),this.$forceUpdate()}},mounted:function(){this.updateFromUserRoles(this.userRoles),this.updateFromSettings(this.settings)},methods:{isFiltered:function(e,t){return null==t||""==t||e.name.indexOf(t)>=0},updateFromUserRoles:function(e){if(e){this.roles={admin:[],user:[],reporter:[]};var t,a=Object(u["a"])(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.roles[s.role]||(this.roles[s.role]=[]),this.roles[s.role].push({name:s.user,status:"ok"})}}catch(n){a.e(n)}finally{a.f()}for(var i in this.roles)this.roles[i].sort()}},updateFromSettings:function(e){if(e){var t,a=Object(u["a"])(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;"manageOnSites"==s.key?this.manageOnSites="true"==s.value:"manageArrivals"==s.key?this.manageArrivals="true"==s.value:"manageDepartures"==s.key?this.manageDepartures="true"==s.value:"manageParkings"==s.key?this.manageParkings="true"==s.value:"manageRestaurants"==s.key&&(this.manageRestaurants="true"==s.value)}}catch(i){a.e(i)}finally{a.f()}}},saveSettings:function(){var e=this,t=[{key:"manageOnSites",value:e.manageOnSites?"true":"false"},{key:"manageArrivals",value:e.manageArrivals?"true":"false"},{key:"manageDepartures",value:e.manageDepartures?"true":"false"},{key:"manageParkings",value:e.manageParkings?"true":"false"},{key:"manageRestaurants",value:e.manageRestaurants?"true":"false"}];$e.dispatch("saveSettings",t)},reloadUsers:function(){$e.dispatch("loadUserRoles")},editUsers:function(e){if(this.editedRole==e)this.editedRole=null,this.editedUsers=null;else{this.editedUsers="";var t,a=Object(u["a"])(this.roles[e]);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.editedUsers+=s.name+" "}}catch(i){a.e(i)}finally{a.f()}this.editedRole=e}},cancelUsersEdition:function(){this.editedRole=null,this.editedUsers=null},saveUsersEdition:function(){var e=[];if(this.editedUsers&&this.editedRole){var t,a=Object(u["a"])(this.userRoles);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.role==this.editedRole&&e.push({name:s.user,status:"ok"})}}catch(w){a.e(w)}finally{a.f()}var i=[];if(this.editedUsers){var n,r=this.editedUsers.split(/[^A-Za-z_]/),c=Object(u["a"])(r);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(o.length>0){var l,d=o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),f=!1,v=Object(u["a"])(i);try{for(v.s();!(l=v.n()).done;){var m=l.value;m.name==d&&(f=!0)}}catch(w){v.e(w)}finally{v.f()}if(!f)for(var h=0;h<e.length;h++)if(e[h].name==d){i.push(e[h]),e.splice(h,1),f=!0;break}f||i.push({name:d,status:"new"})}}}catch(w){c.e(w)}finally{c.f()}var p,g=Object(u["a"])(e);try{for(g.s();!(p=g.n()).done;){var b=p.value;b.status="delete",i.push(b)}}catch(w){g.e(w)}finally{g.f()}}this.roles[this.editedRole]=i}this.editedRole=null,this.editedUsers=null},saveUsers:function(){var e=[];for(var t in this.roles){var a,s=Object(u["a"])(this.roles[t]);try{for(s.s();!(a=s.n()).done;){var i=a.value;"delete"!=i.status&&e.push({user:i.name,role:t})}}catch(n){s.e(n)}finally{s.f()}}$e.dispatch("saveUserRoles",e)}}}),G=V,L=(a("e6e9"),Object(R["a"])(G,Y,z,!1,null,"029be964",null)),B=L.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",class:[e.hue],attrs:{id:"sites"}},[a("div",{staticClass:"wrapper w-full p-4"},[a("div",{staticClass:"create w-full select-none"},[a("div",{staticClass:"buttons flex"},[a("span",{staticClass:"button create-button ml-3",on:{click:function(t){e.createdSite=null==e.createdSite?{name:"",description:"",path:"#France #Paris"}:null}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"plus"}}),e._v(" create site ")],1),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadSites()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1)]),null!=e.createdSite?a("div",{staticClass:"content w-full"},[a("div",{staticClass:"flex items-center mb-2"},[e._m(0),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.name,expression:"createdSite.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:e.createdSite.name},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"name",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(1),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.description,expression:"createdSite.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:e.createdSite.description},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"description",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(2),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.path,expression:"createdSite.path"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:e.createdSite.path},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"path",t.target.value)}}})])]),a("div",{staticClass:"buttons select-none flex justify-end"},[a("span",{staticClass:"button cancel",on:{click:function(t){e.createdSite=null}}},[e._v("cancel")]),a("span",{staticClass:"button",on:{click:function(t){return e.createSite(e.createdSite)}}},[e._v("save")])])]):e._e()]),a("div",{staticClass:"w-full"},e._l(e.orderedSites,(function(t){return a("div",{key:t.id,staticClass:"site"},[t.definition?[a("div",{staticClass:"main select-none"},[a("div",{staticClass:"flex justify-end pr-2"},[a("div",{staticClass:"buttons flex"},[t!=e.editedSite?[a("span",{staticClass:"button edit obfuscable",on:{click:function(a){e.editedSite=t}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1),a("span",{staticClass:"button delete obfuscable",on:{click:function(a){return e.deleteSite(t)}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" delete ")],1)]:e._e(),a("span",{staticClass:"button save obfuscable",on:{click:function(a){return e.saveSite(t)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1),a("span",{staticClass:"menu pl-2 cursor-pointer"},[a("font-awesome-icon",{attrs:{icon:"bars"}})],1)],2)]),a("div",{staticClass:"flex"},[t!=e.editedSite?[a("div",{staticClass:"name value whitespace-no-wrap"},[e._v(e._s(t.definition.name))]),a("div",{staticClass:"description value w-full"},[e._v(e._s(t.definition.description))])]:e._e(),t==e.editedSite?[a("div",{staticClass:"name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.name,expression:"site.definition.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:t.definition.name},on:{input:function(a){a.target.composing||e.$set(t.definition,"name",a.target.value)}}})]),a("div",{staticClass:"description w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.description,expression:"site.definition.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:t.definition.description},on:{input:function(a){a.target.composing||e.$set(t.definition,"description",a.target.value)}}})])]:e._e()],2),t!=e.editedSite&&t.definition.path?[a("div",{staticClass:"flex"},[a("div",{staticClass:"tags flex w-1/2"},e._l(t.definition.path.split(" "),(function(t){return a("span",{key:t,staticClass:"tag"},[e._v(" "+e._s(t)+" ")])})),0),a("div",{staticClass:"restaurant flex w-1/2"},[a("font-awesome-icon",{attrs:{icon:"utensils"}}),a("div",{staticClass:"value"},[e._v(" "+e._s(t.definition.restaurant?t.definition.restaurant.name:"none")+" ")])],1)])]:e._e(),t==e.editedSite?[a("div",{staticClass:"flex"},[a("div",{staticClass:"tags w-1/2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.path,expression:"site.definition.path"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:t.definition.path},on:{input:function(a){a.target.composing||e.$set(t.definition,"path",a.target.value)}}})]),a("div",{staticClass:"restaurant flex w-1/2"},[a("v-select",{staticClass:"white",attrs:{options:e.listRestaurants},model:{value:e.selectedRestaurant,callback:function(t){e.selectedRestaurant=t},expression:"selectedRestaurant"}})],1)])]:e._e()],2)]:e._e(),a("div",{staticClass:"capacities w-full"},[a("SiteCapacities",{attrs:{site:t,saveSite:e.saveSite}})],1)],2)})),0)])])},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-name"}},[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-desc"}},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-path"}},[e._v("Tags")])])}],W=(a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capabilities",class:[e.hue]},[a("ag-grid-vue",{class:{"ag-theme-alpine":"light"==e.hue,"ag-theme-alpine-dark":"dark"==e.hue,"w-full":!0},staticStyle:{height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"footer flex justify-end"},[a("div",{staticClass:"button plus",on:{click:function(t){return e.createRow()}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"button minus",on:{click:function(t){return e.getSelectedRows()}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1)])],1)}),Z=[],K=(a("a9e3"),a("401b")),Q={props:["site","saveSite"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{site:function(){this.rowData=this.site.capacities}},data:function(){return{columnDefs:null,rowData:null}},components:{AgGridVue:K["AgGridVue"]},beforeMount:function(){this.columnDefs=[{headerName:"Date",children:[{headerName:"Start date",field:"startDate",editable:!0,sortable:!0,width:100,valueParser:this.dateParser,valueFormatter:this.dateFormatter},{headerName:"End date",field:"endDate",editable:!0,sortable:!0,width:100,valueParser:this.dateParser,valueFormatter:this.dateFormatter}]},{headerName:"Presence",children:[{headerName:"",field:"onSite",editable:!0,width:70,minwidth:60,valueParser:this.numberParser}]},{headerName:"Arrival",children:[{headerName:"7:00",field:"arrival_700",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"7:30",field:"arrival_730",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"8:00",field:"arrival_800",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"8:30",field:"arrival_830",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"9:00",field:"arrival_900",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"9:30",field:"arrival_930",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"10:00",field:"arrival_1000",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"10:30",field:"arrival_1030",editable:!0,width:50,minwidth:40,valueParser:this.numberParser}]},{headerName:"Departure",children:[{headerName:"17:00",field:"departure_1700",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"17:30",field:"departure_1730",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"18:00",field:"departure_1800",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"18:30",field:"departure_1830",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"19:00",field:"departure_1900",editable:!0,width:50,minwidth:40,valueParser:this.numberParser}]},{headerName:"Parking",children:[{headerName:"car",field:"car",editable:!0,width:70,minwidth:45,valueParser:this.numberParser},{headerName:"moto",field:"motorcycle",editable:!0,width:70,minwidth:45,valueParser:this.numberParser}]}],this.rowData=this.site.capacities},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit()},getSelectedRows:function(){var e=this,t=this.gridApi.getSelectedNodes();t.forEach((function(t){e.rowData.splice(e.rowData.indexOf(t.data),1)}))},numberParser:function(e){return Number(e.newValue)},dateParser:function(e){return void 0!=e.newValue?y()(e.newValue).format("YYYY-MM-DD"):null},dateFormatter:function(e){return e.value?y()(e.value).format("DD/MM/YYYY"):null},createRow:function(){var e=y()().add(1,"days").format("YYYY-MM-DD");this.rowData.push({startDate:e,endDate:e,onSite:0,arrival_700:0,arrival_730:0,arrival_800:0,arrival_830:0,arrival_900:0,arrival_930:0,arrival_1000:0,arrival_1030:0,departure_1700:0,departure_1730:0,departure_1800:0,departure_1830:0,departure_1900:0,motorcycle:0,car:0})}}},q=Q,X=Object(R["a"])(q,W,Z,!1,null,null,null),ee=X.exports,te={store:$e,components:{SiteCapacities:ee},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","sites","restaurants"])),{},{orderedSites:function(){return this.sites.slice().sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))},listRestaurants:function(){var e,t=[{label:"none",code:null}],a=Object(u["a"])(this.restaurants);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push({label:s.definition.name,code:s.definition.id})}}catch(i){a.e(i)}finally{a.f()}return t}}),watch:{selectedRestaurant:function(e){e&&this.editedSite&&(this.editedSite.definition.restaurant=null!=this.selectedRestaurant.code?{id:this.selectedRestaurant.code}:null)}},data:function(){return{createdSite:null,editedSite:null,selectedRestaurant:null}},methods:{createSite:function(e,t){var a=this;m.a.post("api/site/",{definition:e,capacities:t}).then((function(e){e.data&&e.data.definition&&e.data.definition.name?$e.commit("SET_INFO","Site "+e.data.definition.name+" successfully created"):(console.log(e.data),$e.commit("SET_INFO","Error while creating site")),$e.dispatch("loadSites")})).catch((function(e){$e.commit("SET_INFO","Error while creating site: "+(e.response&&e.response.data?e.response.data.message:e.message))})),a.createdSite=null},reloadSites:function(){this.createdSite=null,this.editedSite=null,this.selectedRestaurant=null,$e.dispatch("reloadAll")},saveSite:function(e){var t=this;m.a.post("api/site/",e).then((function(){$e.commit("SET_INFO","Site "+e.definition.name+"  saved."),t.reloadSites()})).catch((function(e){$e.commit("SET_INFO","Error while saving site: "+(e.response&&e.response.data?e.response.data.message:e.message))}))},deleteSite:function(e){var t=this;m.a.delete("api/site/"+e.definition.id).then((function(){$e.commit("SET_INFO","Site "+e.definition.name+"  deleted."),t.reloadSites()})).catch((function(e){$e.commit("SET_INFO","Error while deleting site: "+(e.response&&e.response.data?e.response.data.message:e.message))}))}}},ae=te,se=(a("37d4"),Object(R["a"])(ae,H,J,!1,null,"333c44cd",null)),ie=se.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",class:[e.hue],attrs:{id:"restaurants"}},[a("div",{staticClass:"wrapper w-full p-4"},[a("div",{staticClass:"create w-full select-none"},[a("div",{staticClass:"buttons flex"},[a("span",{staticClass:"button create-button ml-3",on:{click:function(t){e.createdRestaurant=null==e.createdRestaurant?{name:"",description:"",path:"#France #Paris"}:null}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"plus"}}),e._v(" create restaurant ")],1),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadRestaurants()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1)]),null!=e.createdRestaurant?a("div",{staticClass:"content w-full"},[a("div",{staticClass:"flex items-center mb-2"},[e._m(0),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.name,expression:"createdRestaurant.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:e.createdRestaurant.name},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"name",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(1),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.description,expression:"createdRestaurant.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:e.createdRestaurant.description},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"description",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(2),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.path,expression:"createdRestaurant.path"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:e.createdRestaurant.path},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"path",t.target.value)}}})])]),a("div",{staticClass:"buttons select-none flex justify-end"},[a("span",{staticClass:"button cancel",on:{click:function(t){e.createdRestaurant=null}}},[e._v("cancel")]),a("span",{staticClass:"button",on:{click:function(t){return e.createRestaurant(e.createdRestaurant)}}},[e._v("save")])])]):e._e()]),a("div",{staticClass:"w-full"},e._l(e.orderedRestaurants,(function(t){return a("div",{key:t.id,staticClass:"restaurant"},[t.definition?[a("div",{staticClass:"main select-none"},[a("div",{staticClass:"flex justify-end pr-2"},[a("div",{staticClass:"buttons flex"},[t!=e.editedRestaurant?[a("span",{staticClass:"button edit obfuscable",on:{click:function(a){e.editedRestaurant=t}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1),a("span",{staticClass:"button delete obfuscable",on:{click:function(a){return e.deleteRestaurant(t)}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" delete ")],1)]:e._e(),a("span",{staticClass:"button save obfuscable",on:{click:function(a){return e.saveRestaurant(t)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1),a("span",{staticClass:"menu pl-2 cursor-pointer",on:{click:function(a){e.expandedRestaurant=t==e.expandedRestaurant?null:t}}},[a("font-awesome-icon",{attrs:{icon:"bars"}})],1)],2)]),a("div",{staticClass:"flex"},[t!=e.editedRestaurant?[a("div",{staticClass:"name value whitespace-no-wrap"},[e._v(e._s(t.definition.name))]),a("div",{staticClass:"description value w-full"},[e._v(" "+e._s(t.definition.description)+" ")])]:e._e(),t==e.editedRestaurant?[a("div",{staticClass:"name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.name,expression:"restaurant.definition.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:t.definition.name},on:{input:function(a){a.target.composing||e.$set(t.definition,"name",a.target.value)}}})]),a("div",{staticClass:"description w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.description,expression:"restaurant.definition.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:t.definition.description},on:{input:function(a){a.target.composing||e.$set(t.definition,"description",a.target.value)}}})])]:e._e()],2),t!=e.editedRestaurant&&t.definition.path?[a("div",{staticClass:"tags flex"},e._l(t.definition.path.split(" "),(function(t){return a("span",{key:t,staticClass:"tag"},[e._v(e._s(t))])})),0)]:e._e(),t==e.editedRestaurant?[a("div",{staticClass:"tags w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.path,expression:"restaurant.definition.path"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:t.definition.path},on:{input:function(a){a.target.composing||e.$set(t.definition,"path",a.target.value)}}})])]:e._e()],2)]:e._e(),a("div",{staticClass:"capacities w-full"},[a("RestaurantCapacities",{attrs:{restaurant:t,saveRestaurant:e.saveRestaurant}})],1)],2)})),0)])])},re=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-name"}},[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-desc"}},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-path"}},[e._v("Tags")])])}],ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capabilities",class:[e.hue]},[a("ag-grid-vue",{class:{"ag-theme-alpine":"light"==e.hue,"ag-theme-alpine-dark":"dark"==e.hue,"w-full":!0},staticStyle:{height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"footer flex justify-end"},[a("div",{staticClass:"button plus",on:{click:function(t){return e.createRow()}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"button minus",on:{click:function(t){return e.getSelectedRows()}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1)])],1)},oe=[],le={props:["restaurant","saveRestaurant"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{restaurant:function(){this.rowData=this.restaurant.capacities}},data:function(){return{columnDefs:null,rowData:null}},components:{AgGridVue:K["AgGridVue"]},beforeMount:function(){this.columnDefs=[{headerName:"Date",children:[{headerName:"Start date",field:"startDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter},{headerName:"End date",field:"endDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter}]},{headerName:"Lunch time",children:[{headerName:"11:30 > 12:00",field:"arrival_1130",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"12:00 > 12:30",field:"arrival_1200",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"12:30 > 13:00",field:"arrival_1230",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"13:00 > 13:30",field:"arrival_1300",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"13:30 > 14:00",field:"arrival_1330",editable:!0,width:110,minwidth:45,valueParser:this.numberParser}]}],this.rowData=this.restaurant.capacities},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit()},getSelectedRows:function(){var e=this,t=this.gridApi.getSelectedNodes();t.forEach((function(t){e.rowData.splice(e.rowData.indexOf(t.data),1)}))},numberParser:function(e){return Number(e.newValue)},dateParser:function(e){return void 0!=e.newValue?y()(e.newValue).format("YYYY-MM-DD"):null},dateFormatter:function(e){return e.value?y()(e.value).format("DD/MM/YYYY"):null},createRow:function(){var e=y()().add(1,"days").format("YYYY-MM-DD");this.rowData.push({startDate:e,endDate:e,arrival_1130:0,arrival_1200:0,arrival_1230:0,arrival_1300:0,arrival_1330:0})}}},ue=le,de=Object(R["a"])(ue,ce,oe,!1,null,null,null),fe=de.exports,ve={store:$e,components:{RestaurantCapacities:fe},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","restaurants"])),{},{orderedRestaurants:function(){return this.restaurants.slice().sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))}}),data:function(){return{createdRestaurant:null,expandedRestaurant:null,editedRestaurant:null}},methods:{createRestaurant:function(e,t){var a=this;m.a.post("api/restaurant/",{definition:e,capacities:t}).then((function(e){e.data&&e.data.definition&&e.data.definition.name?$e.commit("SET_INFO","Restaurant "+e.data.definition.name+" successfully created"):(console.log(e.data),$e.commit("SET_INFO","Error while creating restaurant")),$e.dispatch("loadRestaurants")})).catch((function(e){$e.commit("SET_INFO","Error while creating restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))})),a.createdRestaurant=null},reloadRestaurants:function(){this.createdRestaurant=null,this.editedRestaurant=null,$e.dispatch("reloadAll")},saveRestaurant:function(e){var t=this;m.a.post("api/restaurant/",e).then((function(){$e.commit("SET_INFO","Restaurant "+e.definition.name+"  saved."),t.reloadRestaurants()})).catch((function(e){$e.commit("SET_INFO","Error while saving restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))}))},deleteRestaurant:function(e){var t=this;m.a.delete("api/restaurant/"+e.definition.id).then((function(){$e.commit("SET_INFO","Restaurant "+e.definition.name+"  deleted."),t.reloadRestaurants()})).catch((function(e){$e.commit("SET_INFO","Error while deleting restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))}))}}},me=ve,he=(a("b547"),Object(R["a"])(me,ne,re,!1,null,"c06dbdf8",null)),pe=he.exports,ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reports w-full flex",class:[e.hue]},[s("div",{staticClass:"center-panel w-full"},[s("div",{staticClass:"section"},[s("div",{staticClass:"title"},[e._v("Sites")]),e._l(e.sites,(function(t){return s("div",{key:t.definition.id,staticClass:"report"},[s("div",{staticClass:"subtitle w-1/2 text-left"},[e._v(e._s(t.definition.name))]),s("div",{staticClass:"content"},[s("EntityReport",{attrs:{values:e.siteData[t.definition.id],type:"site",name:"site-"+t.definition.id,startDate:e.date,nb:5}})],1)])})),e._m(0)],2)]),s("div",{staticClass:"right-panel select-none overflow-y-auto"},[s("div",{staticClass:"date-wrapper"},[s("date-pick",{attrs:{hasInputElement:!1},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),s("div",{staticClass:"excel-wrapper flex justify-end"},[s("div",{staticClass:"button flex",class:{disabled:!e.date},on:{click:function(t){return e.exportWeekly()}}},[s("img",{attrs:{src:a("79c3")}}),s("div",{staticClass:"value"},[e._v("Download weekly report")])])])])])},be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comments"},[a("div",{staticClass:"comment text-right"},[e._v("* red lines represent arrival time slots, green lines lunch time slots,")]),a("div",{staticClass:"comment text-right"},[e._v("orange lines departures time slots, and purple lines parkings.")])])}],we=a("f0ca"),_e=a.n(we),Ce=(a("6f3c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"main",staticClass:"graph entity flex justify-center",class:[e.hue],attrs:{id:e.name+"-entity"}})}),ye=[],Se=(a("ddb0"),{props:["values","type","name","startDate","nb"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{startDate:function(e){this.updateView(e,this.values)},values:function(e){this.updateView(this.startDate,e)}},data:function(){return{maxValue:0,svg:null,x:null,y:null,localIndex:0}},methods:{updateView:function(e,t){var a=this;if(e&&t){var s=a.getDates(e,a.nb),i=a.getMax(t),n=700,r=200,c={top:10,right:10,bottom:10,left:10},o=n-c.left-c.right,d=r-c.top-c.bottom;l["select"]("#"+a.name+"-entity").selectAll("svg").remove(),a.svg=l["select"]("#"+a.name+"-entity").append("svg").attr("width",n).attr("height",r).append("g").attr("transform","translate("+c.left+","+c.top+")"),a.x=l["scaleLinear"]().domain([0,100*a.nb]).range([0,o]);var f=100*a.nb/o,v=d-20;a.y=l["scaleLinear"]().domain([0,i]).range([v,5]);var m,h=0,p=Object(u["a"])(s);try{for(p.s();!(m=p.n()).done;){var g=m.value;h%200==0&&a.svg.append("rect").attr("x",a.x(h)).attr("y",0).attr("width",a.x(h+100)-a.x(h+5)).attr("height",d).attr("class","odd");var b,w=Object(u["a"])(t);try{for(w.s();!(b=w.n()).done;){var _=b.value;g==_.date&&(a.localIndex=h,_["onSite"]&&_["onSite_u"]&&_["onSite"]>0&&(a.addRect(0,v,3*f,(_["onSite_u"]>_["onSite"]?1:_["onSite_u"]/_["onSite"])*i,"on usage"),a.addRect(2,v,3*f,(_["onSite_u"]>_["onSite"]?_["onSite"]/_["onSite_u"]:1)*i,"on def")),a.svg.append("line").attr("class","sepline").attr("x1",a.x(6+a.localIndex)).attr("y1",0).attr("x2",a.x(6+a.localIndex)).attr("y2",v),a.addRect(8,v,3*f,_["h700_u"],"arr usage"),a.addRect(10,v,3*f,_["h700"],"arr def"),a.addRect(12,v,3*f,_["h730_u"],"arr usage"),a.addRect(14,v,3*f,_["h730"],"arr def"),a.addRect(16,v,3*f,_["h800_u"],"arr usage"),a.addRect(18,v,3*f,_["h800"],"arr def"),a.addRect(20,v,3*f,_["h830_u"],"arr usage"),a.addRect(22,v,3*f,_["h830"],"arr def"),a.addRect(24,v,3*f,_["h900_u"],"arr usage"),a.addRect(26,v,3*f,_["h900"],"arr def"),a.addRect(28,v,3*f,_["h930_u"],"arr usage"),a.addRect(30,v,3*f,_["h930"],"arr def"),a.addRect(32,v,3*f,_["h1000_u"],"arr usage"),a.addRect(34,v,3*f,_["h1000"],"arr def"),a.svg.append("line").attr("class","sepline").attr("x1",a.x(38+a.localIndex)).attr("y1",0).attr("x2",a.x(38+a.localIndex)).attr("y2",v),a.addRect(40,v,3*f,_["h1130_u"],"rest usage"),a.addRect(42,v,3*f,_["h1130"],"rest def"),a.addRect(44,v,3*f,_["h1200_u"],"rest usage"),a.addRect(46,v,3*f,_["h1200"],"rest def"),a.addRect(48,v,3*f,_["h1230_u"],"rest usage"),a.addRect(50,v,3*f,_["h1230"],"rest def"),a.addRect(52,v,3*f,_["h1300_u"],"rest usage"),a.addRect(54,v,3*f,_["h1300"],"rest def"),a.addRect(56,v,3*f,_["h1330_u"],"rest usage"),a.addRect(58,v,3*f,_["h1330"],"rest def"),a.svg.append("line").attr("class","sepline").attr("x1",a.x(62+a.localIndex)).attr("y1",0).attr("x2",a.x(62+a.localIndex)).attr("y2",v),a.addRect(64,v,3*f,_["h1700_u"],"dep usage"),a.addRect(66,v,3*f,_["h1700"],"dep def"),a.addRect(68,v,3*f,_["h1730_u"],"dep usage"),a.addRect(70,v,3*f,_["h1730"],"dep def"),a.addRect(72,v,3*f,_["h1800_u"],"dep usage"),a.addRect(74,v,3*f,_["h1800"],"dep def"),a.addRect(76,v,3*f,_["h1830_u"],"dep usage"),a.addRect(78,v,3*f,_["h1830"],"dep def"),a.addRect(80,v,3*f,_["h1900_u"],"dep usage"),a.addRect(82,v,3*f,_["h1900"],"dep def"),a.svg.append("line").attr("class","sepline").attr("x1",a.x(86+a.localIndex)).attr("y1",0).attr("x2",a.x(86+a.localIndex)).attr("y2",v),a.addRect(88,v,3*f,_["car_u"],"park usage"),a.addRect(90,v,3*f,_["car"],"park def"),a.addRect(92,v,3*f,_["moto_u"],"park usage"),a.addRect(94,v,3*f,_["moto"],"park def"),a.svg.append("text").attr("x",a.x(a.localIndex+15)).attr("y",d-8).attr("dy",".35em").attr("class","date").text(g))}}catch(C){w.e(C)}finally{w.f()}h+=100}}catch(C){p.e(C)}finally{p.f()}a.svg.append("line").attr("class","baseline").attr("x1",a.x(0)).attr("y1",v).attr("x2",o).attr("y2",v),a.svg.append("text").attr("x",-10).attr("y",5).attr("dy",".35em").attr("class","max").text(i),a.svg.append("line").attr("class","maxline").attr("x1",a.x(10)).attr("y1",5).attr("x2",o).attr("y2",5)}},addRect:function(e,t,a,s,i){var n=this;n.svg.append("rect").attr("x",n.x(e+n.localIndex)).attr("y",n.y(s)).attr("width",a).attr("height",t-n.y(s)).attr("class",i)},getDates:function(e,t){for(var a=[],s=0;s<t;s++)a.push(y()(e).add(s,"days").format("YYYY-MM-DD"));return a},getMax:function(e){var t,a=0,s=["h800","h830","h900","h930","h1000","h1130","h1200","h1230","h1300","h1330","h1700","h1730","h1800","h1830","h1900","car","moto"],i=Object(u["a"])(e);try{for(i.s();!(t=i.n()).done;){var n,r=t.value,c=Object(u["a"])(s);try{for(c.s();!(n=c.n()).done;){var o=n.value;a=Math.max(a,r[o],r[o+"_u"])}}catch(l){c.e(l)}finally{c.f()}}}catch(l){i.e(l)}finally{i.f()}return a}}}),ke=Se,je=(a("51ef"),Object(R["a"])(ke,Ce,ye,!1,null,null,null)),xe=je.exports,Re={store:$e,components:{EntityReport:xe,DatePick:_e.a},computed:Object(b["a"])({},Object(f["b"])(["hue","sites","siteDefinitions"])),watch:{date:function(e){this.updateDataReport(e||y()().format("YYYY-MM-DD"))}},data:function(){return{reportSite:null,date:null,siteData:{},restaurantData:{}}},methods:{setReportSite:function(e){this.reportSite=e,this.reportRestaurant=null},setReportRestaurant:function(e){this.reportRestaurant=e,this.reportSite=null},updateDataReport:function(e){var t=this;if(t.sites){var a,s=Object(u["a"])(t.sites);try{var i=function(){var s=a.value;m.a.get("api/usage/site/basic/"+s.definition.id+"?startDate="+e+"&limit=4"+(s.definition.restaurant?"&restaurant="+s.definition.restaurant.id:"")).then((function(e){t.siteData[s.definition.id]=e.data,s.definition.restaurant&&(t.restaurantData[s.definition.restaurant.id]=e.data),t.$forceUpdate()}))};for(s.s();!(a=s.n()).done;)i()}catch(n){s.e(n)}finally{s.f()}}},exportWeekly:function(){this.date&&(window.location.href="/api/report/weekly?startDate="+this.date)}}},Oe=Re,Ee=(a("ef72"),Object(R["a"])(Oe,ge,be,!1,null,"7dad275c",null)),Ue=Ee.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",attrs:{id:"denied"}},[a("div",{staticClass:"main flex justify-center"},[a("font-awesome-icon",{attrs:{icon:"user-lock"}}),a("div",{staticClass:"title"},[e._v("Access denied")])],1),a("div",{staticClass:"content"},[e._v(" You do not have access to the application: please contact the HR department if needed. ")])])},Ae=[],Ne=(a("d5a7"),{}),Pe=Object(R["a"])(Ne,De,Ae,!1,null,"7acdbc7e",null),Te=Pe.exports;s["a"].use(h["a"]);var Ie=[{path:"/",name:"Home",component:$},{path:"/settings",name:"Settings",component:B,beforeEnter:function(e,t,a){$e.dispatch("loadSettings"),$e.dispatch("loadUserRoles"),a()}},{path:"/sites",name:"Sites",component:ie},{path:"/restaurants",name:"Restaurants",component:pe},{path:"/reports",name:"Reports",component:Ue},{path:"/denied",name:"Denied",component:Te}],Fe=new h["a"]({routes:Ie}),Me=Fe;s["a"].use(f["a"]);var $e=new f["a"].Store({state:{hue:"light",user:null,settings:[],userRoles:null,overridenUser:null,info:null,sites:[],restaurants:[],selectedSite:null,selectedRestaurant:null,siteUsages:[],currentUserUsages:[]},mutations:{SET_HUE:function(e,t){e.hue=t},SET_USER:function(e,t){e.user=t},SET_SETTINGS:function(e,t){e.settings=t},SET_OVERRIDEN_USER:function(e,t){e.overridenUser=t},SET_INFO:function(e,t){e.info=t},SET_SITES:function(e,t){e.sites=t},SET_RESTAURANTS:function(e,t){e.restaurants=t},SET_SELECTED_SITE:function(e,t){e.selectedSite=t},SET_SITE_USAGES:function(e,t){e.siteUsages=t},SET_USER_ROLES:function(e,t){e.userRoles=t},SET_CURRENT_USER_USAGES:function(e,t){e.currentUserUsages=t},LOAD_LOCALSTORAGE:function(e){localStorage.getItem("state")&&Object.assign(e,JSON.parse(localStorage.getItem("state")))},CHANGE_HUE:function(e){e.hue="light"===e.hue?"dark":"light",localStorage.setItem("state",JSON.stringify({hue:e.hue}))}},actions:{getUserInfo:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,s=e.dispatch,m.a.get("api/auth/userInfo").then((function(e){e.data&&e.data.login&&e.data.role&&"none"!=e.data.role?(a("SET_USER",e.data),s("loadCurrentUserUsages")):Me.push("/denied")})).catch((function(e){a("SET_INFO","Error: "+e.message),Me.push("/denied")}));case 2:case"end":return t.stop()}}),t)})))()},loadSettings:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,m.a.get("api/setting/all").then((function(e){a("SET_SETTINGS",e.data.settings)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},saveSettings:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,m.a.post("api/setting/all",{settings:t}).then((function(e){s("SET_SETTINGS",e.data.settings),s("SET_INFO","Settings saved")})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadSites:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,m.a.get("api/site/all").then((function(e){a("SET_SITES",e.data)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},loadRestaurants:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,m.a.get("api/restaurant/all").then((function(e){a("SET_RESTAURANTS",e.data)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},changeOverridenUser:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,i=e.dispatch,s("SET_OVERRIDEN_USER",t),t?i("reloadAll"):window.location.href="/";case 3:case"end":return a.stop()}}),a)})))()},changeSelectedSite:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,i,n,r,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.commit,i=e.dispatch,n=e.state,s("SET_SELECTED_SITE",t),!n.sites){a.next=21;break}r=Object(u["a"])(n.sites),a.prev=4,r.s();case 6:if((c=r.n()).done){a.next=13;break}if(o=c.value,!o.definition||o.definition.id!=t.id){a.next=11;break}return i("loadSiteUsages",t),a.abrupt("break",13);case 11:a.next=6;break;case 13:a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](4),r.e(a.t0);case 18:return a.prev=18,r.f(),a.finish(18);case 21:case"end":return a.stop()}}),a,null,[[4,15,18,21]])})))()},loadSiteUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,t&&m.a.get("api/usage/site/basic/"+t.id+(t.restaurant&&t.restaurant.id?"?restaurant="+t.restaurant.id:"")).then((function(e){s("SET_SITE_USAGES",e.data)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,i=e.state,n=e.dispatch,t||(i.overridenUser?t=i.overridenUser:i.user&&(t=i.user.login)),t&&m.a.get("api/usage/user/"+t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data),!i.selectedSite&&e.data&&e.data.length>0&&n("changeSelectedSite",e.data[0].site)})).catch((function(e){s("SET_INFO","Error: "+e.message+" (while retrieving current user usages)")}));case 3:case"end":return a.stop()}}),a)})))()},saveCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,i=e.dispatch,n=e.state,m.a.post("api/workingDays",t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data.workingDays),s("SET_INFO","working days updated"),i("loadSiteUsages",n.selectedSite)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},deleteCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,i=e.dispatch,n=e.state,m.a.post("api/workingDays/delete",t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data.workingDays),s("SET_INFO","working days updated"),i("loadSiteUsages",n.selectedSite)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadUserRoles:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,m.a.get("api/role/all").then((function(e){a("SET_USER_ROLES",e.data.userRoles)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},saveUserRoles:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,m.a.post("api/role/all",{userRoles:t}).then((function(e){s("SET_USER_ROLES",e.data.userRoles),s("SET_INFO","User roles saved")})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},reloadAll:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.dispatch,a("getUserInfo"),a("loadSettings"),a("loadRestaurants"),a("loadSites"),a("loadSiteUsages"),a("loadCurrentUserUsages");case 7:case"end":return t.stop()}}),t)})))()}},getters:{hue:function(e){return e.hue},user:function(e){return e.user},overridenUser:function(e){return e.overridenUser},currentUser:function(e){return null!=e.overridenUser?e.overridenUser:e.user.login},settings:function(e){return e.settings},userName:function(e){return e.userName},info:function(e){return e.info},sites:function(e){return e.sites},siteDefinitions:function(e){var t=[];if(e.sites){var a,s=Object(u["a"])(e.sites);try{for(s.s();!(a=s.n()).done;){var i=a.value;t.push(i.definition)}}catch(n){s.e(n)}finally{s.f()}}return t},restaurantDefinitions:function(e){var t=[];if(e.restaurants){var a,s=Object(u["a"])(e.restaurants);try{for(s.s();!(a=s.n()).done;){var i=a.value;t.push(i.definition)}}catch(n){s.e(n)}finally{s.f()}}return t},restaurants:function(e){return e.restaurants},selectedSite:function(e){return e.selectedSite},selectedRestaurant:function(e){return e.selectedRestaurant},siteUsages:function(e){return e.siteUsages},userRoles:function(e){return e.userRoles},currentUserUsages:function(e){return e.currentUserUsages}},modules:{}}),Ye=a("4a7a"),ze=a.n(Ye),Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.hue],attrs:{id:"app"}},[a("NavBar"),a("div",{staticClass:"container mx-auto flex"},[a("LeftMenu"),a("router-view")],1)],1)},Ge=[],Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:[e.hue],attrs:{id:"navBar"}},[s("div",{staticClass:"main-container container flex justify-between mx-auto px-1"},[s("div",{staticClass:"logo flex select-none",on:{click:function(t){return e.sendToHome()}}},[s("img",{attrs:{src:a("cf05")}}),e._m(0)]),s("div",{staticClass:"actionBar flex"},[e.user?s("div",{staticClass:"user select-none cursor-pointer"},[s("div",{staticClass:"menu flex justify-end",on:{click:function(t){e.menuExpanded=!e.menuExpanded}}},[s("div",{staticClass:"content flex"},[s("font-awesome-icon",{staticClass:"user-logo",attrs:{icon:"user-circle"}}),s("div",{staticClass:"user-name"},[s("div",{staticClass:"name"},[e._v(e._s(e.user.firstName+" "+e.user.lastName))]),""!=e.overridenUser?s("div",{staticClass:"overriden flex justify-end"},[s("span",[e._v(e._s(e.overridenUser))])]):e._e()]),"admin"==e.user.role?[e.menuExpanded?e._e():s("font-awesome-icon",{staticClass:"menu-caret",attrs:{icon:"caret-up"}}),e.menuExpanded?s("font-awesome-icon",{staticClass:"menu-caret",attrs:{icon:"caret-down"}}):e._e()]:e._e()],2)]),e.menuExpanded&&null!=e.user&&"admin"==e.user.role?s("div",{staticClass:"menu-content"},[s("div",{staticClass:"text-left"},[s("label",{staticClass:"text-xs",attrs:{for:"override-input"}},[e._v("Override")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.overridenUserInput,expression:"overridenUserInput"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"override-input",type:"text",placeholder:"..."},domProps:{value:e.overridenUserInput},on:{input:function(t){t.target.composing||(e.overridenUserInput=t.target.value)}}})]),s("div",{staticClass:"buttons text-right"},[s("span",{staticClass:"button stop",on:{click:function(t){return e.stopOverride()}}},[e._v("stop")]),s("span",{staticClass:"button apply",on:{click:function(t){return e.applyOverride(e.overridenUserInput)}}},[e._v("apply")])])]):e._e()]):e._e(),s("div",{staticClass:"hue"},[s("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#AAAAAA",unchecked:"#3c4f54",disabled:"#aaaaaa"}},on:{change:e.changeHue}})],1)])]),null!=e.info?s("div",{staticClass:"info",class:e.infoType,on:{mouseover:function(t){return e.removeInfo()}}},[s("font-awesome-icon",{staticClass:"user-logo",attrs:{icon:"times-circle"},on:{click:function(t){return e.removeInfo()}}}),s("span",[e._v(e._s(e.info))])],1):e._e()])},Be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"post"},[e._v("#OnSite")]),a("span",{staticClass:"covid"},[e._v("Management")])])}],He=(a("baa5"),{name:"NavBar",store:$e,computed:Object(b["a"])({},Object(f["b"])(["hue","user","overridenUser","info"])),watch:{info:function(e){e&&(0===e.lastIndexOf("Warning",0)?this.infoType="warn":0===e.lastIndexOf("Error",0)?this.infoType="error":this.infoType="success")}},data:function(){return{menuExpanded:!1,overridenUserInput:null,infoType:"warn"}},mounted:function(){},methods:{sendToHome:function(){window.location.href="/"},changeHue:function(){$e.commit("CHANGE_HUE")},removeInfo:function(){$e.commit("SET_INFO",null)},stopOverride:function(){k.$emit("clearPendingActions"),$e.dispatch("changeOverridenUser",null),this.menuExpanded=!1},applyOverride:function(e){k.$emit("clearPendingActions"),$e.dispatch("changeOverridenUser",e),this.menuExpanded=!1,"/"!=this.$route.path&&this.$router.push({path:"/"})}}}),Je=He,We=(a("7cc9"),Object(R["a"])(Je,Le,Be,!1,null,"e13aec3a",null)),Ze=We.exports,Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-none",class:[e.hue],attrs:{id:"leftMenu"}},[e.user?a("div",{staticClass:"user-menu"},[a("div",{staticClass:"item",class:{selected:"/"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/"}},[a("font-awesome-icon",{attrs:{icon:"chalkboard"}}),a("span",[e._v("Home")])],1)],1)]):e._e(),null!=e.user&&"admin"==e.user.role&&null==e.overridenUser?a("div",{staticClass:"admin-menu"},[a("div",{staticClass:"title"},[e._v("Admin")]),a("div",{staticClass:"item",class:{selected:"/settings"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/settings"}},[a("font-awesome-icon",{attrs:{icon:"cogs"}}),a("span",[e._v("Settings")])],1)],1),a("div",{staticClass:"item",class:{selected:"/sites"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/sites"}},[a("font-awesome-icon",{attrs:{icon:"city"}}),a("span",[e._v("Sites")])],1)],1),a("div",{staticClass:"item",class:{selected:"/restaurants"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/restaurants"}},[a("font-awesome-icon",{attrs:{icon:"utensils"}}),a("span",[e._v("Restaurants")])],1)],1)]):e._e(),null==e.user||"admin"!=e.user.role&&"reporter"!=e.user.role||null!=e.overridenUser?e._e():a("div",{staticClass:"report-menu"},[a("div",{staticClass:"title"},[e._v("Reporting")]),a("div",{staticClass:"item",class:{selected:"/reports"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/reports"}},[a("font-awesome-icon",{attrs:{icon:"poll"}}),a("span",[e._v("General")])],1)],1)])])},Qe=[],qe={computed:Object(b["a"])({},Object(f["b"])(["hue","user","overridenUser"])),data:function(){return{currentRoute:"/"}},watch:{$route:function(e){this.currentRoute=e.path}},mounted:function(){this.currentRoute=this.$route.path}},Xe=qe,et=(a("c262"),Object(R["a"])(Xe,Ke,Qe,!1,null,"2e30abfe",null)),tt=et.exports,at={components:{NavBar:Ze,LeftMenu:tt},store:$e,computed:Object(b["a"])({},Object(f["b"])(["hue"])),mounted:function(){$e.dispatch("reloadAll")}},st=at,it=(a("5c0b"),Object(R["a"])(st,Ve,Ge,!1,null,null,null)),nt=it.exports;a("def6"),a("6dfc");s["a"].config.productionTip=!1,i["c"].add(n["b"],n["d"],n["f"],n["g"],n["h"],n["n"],n["k"],n["c"],n["u"],n["z"],n["C"],n["x"],n["D"],n["y"],n["q"],n["r"],n["E"],n["A"],n["B"],n["G"],n["o"],n["l"],n["i"],n["j"],n["v"],n["w"],n["m"],n["t"],n["a"],n["s"],n["e"],n["H"],n["F"],n["p"]),s["a"].component("font-awesome-icon",r["a"]),s["a"].use(o.a),s["a"].component("v-select",ze.a),s["a"].use(l),new s["a"]({router:Me,store:$e,render:function(e){return e(nt)},beforeCreate:function(){this.$store.commit("LOAD_LOCALSTORAGE")}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"5ffc":function(e,t,a){},"6d3d":function(e,t,a){},"79c3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADpElEQVRoge2Zf2hVZRjHP++5u8ctp86mi41Q29TZflj3nsjGJl6VVoaTLf1HiszGEiESQZZpg8GIQJuKYRLZH00tS1BbzbnRRMWpaeyPaeQiC6QoRtvwKmy13fP2x8WT695zPWfnXu/E84EL932f933e5/ue9+F9z3vAxcXFJZmIRDn21ftyQrrQAA2JJkG73NCVE+9xUpw6CNQHUgZCA/kSJRwsogDwhUJk3tkuUTNlS0B+bemkVO/QE7oiCwSyEND6Q0ENPKkJiu+umAoo3lw8VfGohVKggdSkQBMMzpOghGczYavPFqYChNfbL5H/leMw2PKjlfLurSKRQna2VH5VFs2mOAvp3iCkKDWz3RcCYuEKSDaO9wE7fF151Phfcawqou7/3G4TiwfnCbxUspraZZuM8ubDW2m9fMIoZzyUwfGNzUycMBGAxradNHUeiGOo0bEs4NB3X1Llr2TOI7MBeD1QTduVdnSpA7AuUGMEf633Gp9dOBThI9qSsLJMYmF5CYX0ENta3zfKudNzWTg3vLfkZOSw6qkXAZBS8l7LNkZCI44Cs4qtJL74yyVO/niKJY8HAKhZVM3pnjO8sXQ9aooKQEv3cS79+n3U/uMiiRtP7ODvkX8AKH60iPKiZ1k2/3kAbg7dZEfbLrsuHWFbwG8Dv9PUud8o11VsQRFhN3s69tJ3qz9+0VnA9Iw2v85vevBKU9NofvMIWZOzjLqrf/Sw+qOX0XXddLAZ/hljjZNvqo5FjXVM+4BH8UTUTUmbjOpRx+LOEWPaiTeWbzBm/69bfUxLzyQ7I5vqhWvZc3Kvab9xkcTaLD8rtbDjoeEhGprfNWyvlr3CzMyZdl06wpYANUXlnYotCBFejgfPf86pq6c59/N5w/728rfiH2UMbC2hmkXV5E5/DIDgYJBPO5sA2NW+m2fyFqAIhZK8BTxXVE7blfaI/kndiWdn5bG2bI1R/vjMJ9wYDALQ8+dPfPtDh2GrfWET6anpjgKziqUnoAiFuhVb8Xq8APQGe/ni4uFRbT7o+JClBUvwKB6mpWeyfvE6trc2jmqTiCS2JECXOmv2vRazzfW+6/jrn7biLq48OO8D8SCpSTxecQUkm/tFwFkzg2kSy+HhhyMvd5mHA9FmR2In2HKYX1s6SZ0wOPf21Xr4JzTA0vV6d0NXcgVE484PHEIoBVLKQqAERn/ggHEqwMxvYb0/T9GFT6D7kOJJwNfd0JWdoPFcXFxcksS/44wNWFr5JHcAAAAASUVORK5CYII="},"7cc9":function(e,t,a){"use strict";var s=a("ab55"),i=a.n(s);i.a},9223:function(e,t,a){"use strict";var s=a("a11f"),i=a.n(s);i.a},"9c0c":function(e,t,a){},a11f:function(e,t,a){},ab55:function(e,t,a){},b4b3:function(e,t,a){},b547:function(e,t,a){"use strict";var s=a("3f9a"),i=a.n(s);i.a},c262:function(e,t,a){"use strict";var s=a("6d3d"),i=a.n(s);i.a},c498:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.7b2cf7e0.png"},d5a7:function(e,t,a){"use strict";var s=a("c498"),i=a.n(s);i.a},def6:function(e,t,a){},e6e9:function(e,t,a){"use strict";var s=a("5ffc"),i=a.n(s);i.a},ef72:function(e,t,a){"use strict";var s=a("b4b3"),i=a.n(s);i.a}});
//# sourceMappingURL=app.17bcf8cf.js.map