(function(e){function t(t){for(var s,r,c=t[0],l=t[1],o=t[2],d=0,f=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0458":function(e,t,a){"use strict";var s=a("7ca9"),n=a.n(s);n.a},"0cc7":function(e,t,a){"use strict";var s=a("f756"),n=a.n(s);n.a},"15ad":function(e,t,a){},1625:function(e,t,a){"use strict";var s=a("66a4"),n=a.n(s);n.a},2554:function(e,t,a){},2944:function(e,t,a){"use strict";var s=a("15ad"),n=a.n(s);n.a},"2d93":function(e,t,a){},"33d5":function(e,t,a){"use strict";var s=a("5c41"),n=a.n(s);n.a},"35c6":function(e,t,a){},"3d56":function(e,t,a){"use strict";var s=a("505c"),n=a.n(s);n.a},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"25548","./bs.js":"25548","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id="4678"},4783:function(e,t,a){},"505c":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=a("ecee"),i=a("c074"),r=a("ad3d"),c=a("f206"),l=a.n(c),o=a("5698"),u=a("b85c"),d=(a("96cf"),a("1da1")),f=a("2f62"),v=a("bc3a"),p=a.n(v),m=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home w-full flex",class:[e.hue]},[a("div",{staticClass:"center-panel w-full"},[e.selectedSite?e._e():a("div",{staticClass:"no-info flex justify-end"},[a("div",{staticClass:"main w-full"},[e._m(0),a("div",{staticClass:"content text-left"},[a("font-awesome-icon",{attrs:{icon:"lightbulb"}}),a("span",[e._v("First, select your working site to start your registration.")])],1)])]),e.startsOfMonth.length>0?a("div",{staticClass:"months"},e._l(e.startsOfMonth,(function(e){return a("div",{key:e},[a("CalendarEditor",{attrs:{startOfMonth:e}})],1)})),0):e._e(),a("div",{staticClass:"booking-panel-wrapper"},[a("BookingPanel")],1)]),a("div",{staticClass:"right-panel select-none overflow-y-auto"},[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"building"}}),e._v(" My site ")],1),a("v-select",{attrs:{value:e.getObj(e.siteDefinitions,e.selectedSite),options:e.siteDefinitions,label:"name"},on:{input:e.setSelectedSite},scopedSlots:e._u([{key:"option",fn:function(t){return[a("h3",{staticStyle:{margin:"0"}},[e._v(e._s(t.name))]),a("div",{staticClass:"description"},[e._v(e._s(t.description))]),a("div",{staticClass:"tag"},[e._v(e._s(t.tags))])]}}])}),e.getSettingProperty("manageRestaurants")?[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"utensils"}}),e._v(" My restaurant ")],1),a("v-select",{attrs:{value:e.getObj(e.restaurantDefinitions,e.selectedRestaurant),options:e.restaurantDefinitions,label:"name"},on:{input:e.setSelectedRestaurant},scopedSlots:e._u([{key:"option",fn:function(t){return[a("h3",{staticStyle:{margin:"0"}},[e._v(e._s(t.name))]),a("div",{staticClass:"description"},[e._v(e._s(t.description))]),a("div",{staticClass:"tag"},[e._v(e._s(t.tags))])]}}],null,!1,2588530244)})]:e._e(),e.getSettingProperty("manageParkings")?[a("div",{staticClass:"title"},[a("font-awesome-icon",{attrs:{icon:"parking"}}),e._v(" My parking ")],1),a("v-select",{attrs:{value:e.getObj(e.parkingDefinitions,e.selectedParking),options:e.parkingDefinitions,label:"name"},on:{input:e.setSelectedParking},scopedSlots:e._u([{key:"option",fn:function(t){return[a("h3",{staticStyle:{margin:"0"}},[e._v(e._s(t.name))]),a("div",{staticClass:"description"},[e._v(e._s(t.description))]),a("div",{staticClass:"tag"},[e._v(e._s(t.tags))])]}}],null,!1,2588530244)})]:e._e()],2)])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title flex justify-between"},[a("div",[a("span",{staticClass:"onsite"},[e._v("#OnSite")]),a("span",{staticClass:"management"},[e._v("Management")])]),a("div",{staticClass:"arrow-right"})])}],b=(a("c975"),a("5530")),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"calendarEditor select-none",class:[e.hue]},[a("div",{staticClass:"title text-left"},[e._v(e._s(e.monthName))]),e._m(0),e.calendarData?a("div",{staticClass:"content px-4"},e._l(e.calendarData,(function(t,s){return a("div",{key:s,staticClass:"week flex"},e._l(t,(function(t,n){return a("div",{key:t.day,staticClass:"day-col day",class:{notADay:!t.day,beforeNow:"beforeNow"==t.status,notOpen:!t.site,selected:t.selected,right:6==n,left:0==n,bottom:s==e.calendarData.length-1},on:{click:function(a){return e.updateSelectStatus(t)}}},[a("div",{staticClass:"dayValue"},[e._v(e._s(t.day))]),t.currentUserUsage?[t.currentUserUsage.offSite?a("div",{staticClass:"currentUserUsage off"},[a("div",[a("font-awesome-icon",{attrs:{icon:"house-user"}})],1)]):e._e(),t.currentUserUsage.offSite?e._e():a("div",{staticClass:"currentUserUsage"},[(t.currentUserUsage.onSite||t.currentUserUsage.arrival)&&e.getSettingProperty("manageOnSites")&&!e.getSettingProperty("manageArrivals")||t.currentUserUsage.onSite&&!t.currentUserUsage.arrival&&e.getSettingProperty("manageArrivals")?a("div",{staticClass:"text-right"},[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1):e._e(),t.currentUserUsage.arrival&&e.getSettingProperty("manageArrivals")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plane-arrival"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.arrival))+" ")],1):e._e(),t.currentUserUsage.lunch&&e.getSettingProperty("manageRestaurants")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"drumstick-bite"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.lunch))+" ")],1):e._e(),t.currentUserUsage.departure&&e.getSettingProperty("manageDepartures")?a("div",{staticClass:"flex justify-between"},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plane-departure"}}),e._v(" "+e._s(e.getAsTime(t.currentUserUsage.departure))+" ")],1):e._e(),t.currentUserUsage.parkingType&&e.getSettingProperty("manageParkings")?a("div",{staticClass:"text-right"},["car"===t.currentUserUsage.parkingType?a("font-awesome-icon",{attrs:{icon:"car"}}):e._e(),"moto"===t.currentUserUsage.parkingType?a("font-awesome-icon",{attrs:{icon:"motorcycle"}}):e._e(),"bike"===t.currentUserUsage.parkingType?a("font-awesome-icon",{attrs:{icon:"bicycle"}}):e._e()],1):e._e()])]:e._e()],2)})),0)})),0):e._e()])},y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header flex w-full px-4"},[a("div",{staticClass:"day-col"},[e._v("Mon")]),a("div",{staticClass:"day-col"},[e._v("Tue")]),a("div",{staticClass:"day-col"},[e._v("Wed")]),a("div",{staticClass:"day-col"},[e._v("Thu")]),a("div",{staticClass:"day-col"},[e._v("Fri")]),a("div",{staticClass:"day-col"},[e._v("Sat")]),a("div",{staticClass:"day-col"},[e._v("Sun")])])}],_=(a("a434"),a("d3b7"),a("25f0"),a("c1df")),k=a.n(_),C=new s["a"],S=C,x={store:jt,props:["startOfMonth"],computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","settings","siteUsages","restaurantUsages","parkingUsages","selectedSite","selectedRestaurant","selectedParking","currentUserUsages"])),{},{monthName:function(){return this.startOfMonth?k()(this.startOfMonth).format("MMMM"):null}}),watch:{siteUsages:function(e){var t=this;t.updateCalendarData(e,t.restaurantUsages,t.parkingUsages,t.currentUserUsages),t.$forceUpdate()},restaurantUsages:function(e){var t=this;t.updateCalendarData(t.siteUsages,e,t.parkingUsages,t.currentUserUsages),t.$forceUpdate()},parkingUsages:function(e){var t=this;t.updateCalendarData(t.siteUsages,t.restaurantUsages,e,t.currentUserUsages),t.$forceUpdate()},currentUserUsages:function(e){var t=this;t.updateCalendarData(t.siteUsages,t.restaurantUsages,t.parkingUsages,e),t.$forceUpdate()}},beforeMount:function(){this.updateCalendarData(this.siteUsages,this.currentUserUsages)},data:function(){return{calendarData:null,selectedDays:[]}},mounted:function(){var e=this;S.$on("clearDaySelections",(function(){e.selectedDays=[],e.$forceUpdate()})),e.updateCalendarData(e.siteUsages,e.restaurantUsages,e.parkingUsages,e.currentUserUsages)},methods:{getAsTime:function(e){if(e){var t=e.toString();return 1030==e?"> 10:30":700==e?"< 7:30":e>=1e3?t.substring(0,2)+":"+t.substring(2):t.substring(0,1)+":"+t.substring(1)}return e},getSettingProperty:function(e){if(this.settings){var t,a=Object(u["a"])(this.settings);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.key==e)return"true"==s.value}}catch(n){a.e(n)}finally{a.f()}}return!1},updateCalendarData:function(e,t,a,s){var n=this,i=k()();if(e&&s&&n.startOfMonth){for(var r=[],c=[{},{},{},{},{},{},{}],l=k()(n.startOfMonth),o=l.clone().endOf("month"),d=l.clone();!d.isAfter(o);d=d.clone().add(1,"days"))c[d.isoWeekday()-1].day=d.date(),d.isBefore(i)&&(c[d.isoWeekday()-1].status="beforeNow"),7==d.isoWeekday()&&(r.push(c),c=[{},{},{},{},{},{},{}]);c[0].day&&r.push(c);var f,v=Object(u["a"])(e);try{for(v.s();!(f=v.n()).done;){var p=f.value,m=k()(p.date);if(m.clone().startOf("month").isSame(l)){var h,g=Object(u["a"])(r);try{for(g.s();!(h=g.n()).done;){var b,w=h.value,y=Object(u["a"])(w);try{for(y.s();!(b=y.n()).done;){var _=b.value;m.date()==_.day&&(_.site=p)}}catch(X){y.e(X)}finally{y.f()}}}catch(X){g.e(X)}finally{g.f()}}}}catch(X){v.e(X)}finally{v.f()}if(t){var C,S=Object(u["a"])(t);try{for(S.s();!(C=S.n()).done;){var x=C.value,R=k()(x.date);if(R.clone().startOf("month").isSame(l)){var j,U=Object(u["a"])(r);try{for(U.s();!(j=U.n()).done;){var O,P=j.value,E=Object(u["a"])(P);try{for(E.s();!(O=E.n()).done;){var D=O.value;R.date()==D.day&&(D.rest=x)}}catch(X){E.e(X)}finally{E.f()}}}catch(X){U.e(X)}finally{U.f()}}}}catch(X){S.e(X)}finally{S.f()}}if(a){var A,N=Object(u["a"])(a);try{for(N.s();!(A=N.n()).done;){var T=A.value,I=k()(T.date);if(I.clone().startOf("month").isSame(l)){var M,$=Object(u["a"])(r);try{for($.s();!(M=$.n()).done;){var F,Y=M.value,L=Object(u["a"])(Y);try{for(L.s();!(F=L.n()).done;){var G=F.value;I.date()==G.day&&(G.park=T)}}catch(X){L.e(X)}finally{L.f()}}}catch(X){$.e(X)}finally{$.f()}}}}catch(X){N.e(X)}finally{N.f()}}var V,z=Object(u["a"])(s);try{for(z.s();!(V=z.n()).done;){var B=V.value,H=k()(B.date);if(H.clone().startOf("month").isSame(l)){var K,J=Object(u["a"])(r);try{for(J.s();!(K=J.n()).done;){var W,Z=K.value,Q=Object(u["a"])(Z);try{for(Q.s();!(W=Q.n()).done;){var q=W.value;H.date()==q.day&&n.selectedSite&&B.siteId&&n.selectedSite==B.siteId&&(q.currentUserUsage=B)}}catch(X){Q.e(X)}finally{Q.f()}}}catch(X){J.e(X)}finally{J.f()}}}}catch(X){z.e(X)}finally{z.f()}n.calendarData=r}},updateSelectStatus:function(e){var t=this;if(e.selected){e.selected=!1;var a=t.selectedDays.indexOf(e);a>=0&&(t.selectedDays.splice(a,1),S.$emit("selectedDays",{startOfMonth:t.startOfMonth,selectedDays:t.selectedDays}),this.$forceUpdate())}else e.day&&"beforeNow"!=e.status&&e.site&&(e.selected=!0,t.selectedDays.push(e),S.$emit("selectedDays",{startOfMonth:t.startOfMonth,selectedDays:t.selectedDays}),this.$forceUpdate())}}},R=x,j=(a("e6e0"),a("2877")),U=Object(j["a"])(R,w,y,!1,null,"7285010f",null),O=U.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.hue],attrs:{id:"booking"}},[e.selectedSite&&e.getDayCount()>0?[a("div",{staticClass:"container mx-auto"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"onsite flex"},[a("toggle-button",{staticClass:"onSiteButton",attrs:{labels:{checked:"On site",unchecked:"Off site"},width:70,color:{checked:"#26a2dc",unchecked:"#3c4f54"},sync:!0},model:{value:e.onSite,callback:function(t){e.onSite=t},expression:"onSite"}})],1),e.onSite&&(e.getSettingProperty("manageArrivals")||e.getSettingProperty("manageDepartures"))?a("div",{staticClass:"site flex"},[a("SiteTimeSlots",{attrs:{manageOnSites:e.getSettingProperty("manageOnSites"),manageArrival:e.getSettingProperty("manageArrivals"),manageDeparture:e.getSettingProperty("manageDepartures"),arrival:e.arrival,departure:e.departure,days:e.days},on:{setArrival:e.setArrival,setDeparture:e.setDeparture}})],1):e._e(),a("div",{staticClass:"rest flex justify-between"},[e.onSite&&e.getSettingProperty("manageRestaurants")?a("div",{staticClass:"w-5/12"},[a("RestaurantTimeSlots",{attrs:{lunch:e.lunch,days:e.days},on:{setLunch:e.setLunch}})],1):e._e(),e.onSite&&e.getSettingProperty("manageParkings")?a("div",{staticClass:"w-1/4"},[a("ParkingSlots",{attrs:{parking:e.parking,days:e.days},on:{setParking:e.setParking}})],1):e._e(),(e.getSettingProperty("manageParkings")||e.getSettingProperty("manageRestaurants"))&&e.onSite?e._e():a("div"),e.getDayCount()>0?a("div",{staticClass:"actions flex justify-end"},[a("div",{staticClass:"button delete",on:{click:function(t){return e.deleteBookings()}}},[e._v("remove")]),a("div",{staticClass:"button",on:{click:function(t){return e.saveBookings()}}},[e._v("save")])]):e._e()])])])]:e._e()],2)},E=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"site-time w-full flex",class:[e.hue]},[e.manageArrival?a("div",{staticClass:"arrivals flex w-7/12"},[a("div",{staticClass:"title"},[e._v("Arrival:")]),a("div",{staticClass:"content w-full"},[e._m(0),a("div",{staticClass:"w-full flex vals"},[a("div",{staticClass:"w-1/6 val first ml-auto",class:e.getArrivalClass("h700",700),on:{click:function(t){return e.setArrival(700,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h730",730),on:{click:function(t){return e.setArrival(730,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h800",800),on:{click:function(t){return e.setArrival(800,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h830",830),on:{click:function(t){return e.setArrival(830,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h900",900),on:{click:function(t){return e.setArrival(900,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h930",930),on:{click:function(t){return e.setArrival(930,t)}}}),a("div",{staticClass:"w-1/12 val",class:e.getArrivalClass("h1000",1e3),on:{click:function(t){return e.setArrival(1e3,t)}}}),a("div",{staticClass:"w-1/6 val last mr-auto",class:e.getArrivalClass("h1030",1030),on:{click:function(t){return e.setArrival(1030,t)}}})])])]):e._e(),e.manageDeparture?a("div",{staticClass:"departures flex w-5/12"},[a("div",{staticClass:"title"},[e._v("Departure:")]),a("div",{staticClass:"content w-full"},[e._m(1),a("div",{staticClass:"w-full flex vals"},[a("div",{staticClass:"w-1/6 val first ml-auto",class:e.getDepartureClass("h1700",1700),on:{click:function(t){return e.setDeparture(1700,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getDepartureClass("h1730",1730),on:{click:function(t){return e.setDeparture(1730,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getDepartureClass("h1800",1800),on:{click:function(t){return e.setDeparture(1800,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getDepartureClass("h1830",1830),on:{click:function(t){return e.setDeparture(1830,t)}}}),a("div",{staticClass:"w-1/6 val last mr-auto",class:e.getDepartureClass("h1900",1900),on:{click:function(t){return e.setDeparture(1900,t)}}})])])]):e._e()])},A=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full flex headers"},[a("div",{staticClass:"w-1/6 header ml-auto"},[e._v("7h30")]),a("div",{staticClass:"w-1/12 header"},[e._v("8h00")]),a("div",{staticClass:"w-1/12 header"},[e._v("8h30")]),a("div",{staticClass:"w-1/12 header"},[e._v("9h00")]),a("div",{staticClass:"w-1/12 header"},[e._v("9h30")]),a("div",{staticClass:"w-1/12 header"},[e._v("10h00")]),a("div",{staticClass:"w-1/12 header"},[e._v("10h30")]),a("div",{staticClass:"w-1/6 header mr-auto"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full flex headers"},[a("div",{staticClass:"w-1/6 header ml-auto"},[e._v("17h30")]),a("div",{staticClass:"w-1/6 header"},[e._v("18h00")]),a("div",{staticClass:"w-1/6 header"},[e._v("18h30")]),a("div",{staticClass:"w-1/6 header"},[e._v("19h00")]),a("div",{staticClass:"w-1/6 header mr-auto"})])}],N={computed:Object(b["a"])({},Object(f["b"])(["hue","selectedSite"])),props:["manageOnSites","manageArrival","manageDeparture","arrival","departure","days"],mounted:function(){var e=this;S.$on("selectedDays",(function(){e.$forceUpdate()}))},methods:{setArrival:function(e,t){t.srcElement.classList.contains("available")&&this.$emit("setArrival",e)},setDeparture:function(e,t){t.srcElement.classList.contains("available")&&this.$emit("setDeparture",e)},getArrivalClass:function(e,t){var a="",s=!0,n=!0;for(var i in this.days){var r,c=Object(u["a"])(this.days[i]);try{for(c.s();!(r=c.n()).done;){var l=r.value;s=!1,l.site[e]-l.site[e+"_u"]<=0&&(!l.currentUserUsage||l.currentUserUsage.siteId!==this.selectedSite||l.currentUserUsage.arrival!==t)&&(this.manageOnSites&&l.currentUserUsage&&l.currentUserUsage.siteId===this.selectedSite||(n=!1)),this.manageOnSites&&l.site["onSite"]-l.site["onSite_u"]<=0&&(!l.currentUserUsage||l.currentUserUsage.siteId!==this.selectedSite)&&(n=!1)}}catch(o){c.e(o)}finally{c.f()}}return!s&&n&&(a+="available "),t===this.arrival&&(a+="selected "),a},getDepartureClass:function(e,t){var a="",s=!0,n=!0;for(var i in this.days){var r,c=Object(u["a"])(this.days[i]);try{for(c.s();!(r=c.n()).done;){var l=r.value;s=!1,l.site[e]-l.site[e+"_u"]<=0&&(!l.currentUserUsage||l.currentUserUsage.siteId!==this.selectedSite||l.currentUserUsage.departure!==t)&&(this.manageOnSites&&l.currentUserUsage&&l.currentUserUsage.siteId===this.selectedSite||(n=!1)),this.manageOnSites&&l.site["onSite"]-l.site["onSite_u"]<=0&&(!l.currentUserUsage||l.currentUserUsage.siteId!==this.selectedSite)&&(n=!1)}}catch(o){c.e(o)}finally{c.f()}}return!s&&n&&(a+="available "),t===this.departure&&(a+="selected "),a}}},T=N,I=(a("33d5"),Object(j["a"])(T,D,A,!1,null,"5f6cd588",null)),M=I.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"restaurant-time w-full flex",class:[e.hue]},[a("div",{staticClass:"title"},[e._v("Lunch:")]),a("div",{staticClass:"content w-full"},[e._m(0),a("div",{staticClass:"w-full flex vals"},[a("div",{staticClass:"w-1/6 val first ml-auto",class:e.getClass("h1130",1130),on:{click:function(t){return e.setLunch(1130,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getClass("h1200",1200),on:{click:function(t){return e.setLunch(1200,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getClass("h1230",1230),on:{click:function(t){return e.setLunch(1230,t)}}}),a("div",{staticClass:"w-1/6 val",class:e.getClass("h1300",1300),on:{click:function(t){return e.setLunch(1300,t)}}}),a("div",{staticClass:"w-1/6 val last mr-auto",class:e.getClass("h1330",1330),on:{click:function(t){return e.setLunch(1330,t)}}})])])])},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full flex headers"},[a("div",{staticClass:"w-1/6 header ml-auto"},[e._v("12h00")]),a("div",{staticClass:"w-1/6 header"},[e._v("12h30")]),a("div",{staticClass:"w-1/6 header"},[e._v("13h00")]),a("div",{staticClass:"w-1/6 header"},[e._v("13h30")]),a("div",{staticClass:"w-1/6 header mr-auto"})])}],Y={computed:Object(b["a"])({},Object(f["b"])(["hue","selectedRestaurant"])),props:["lunch","days"],mounted:function(){var e=this;S.$on("selectedDays",(function(){e.$forceUpdate()}))},methods:{setLunch:function(e,t){t.srcElement.classList.contains("available")&&this.$emit("setLunch",e)},getClass:function(e,t){var a="",s=!0,n=!0;for(var i in this.days){var r,c=Object(u["a"])(this.days[i]);try{for(c.s();!(r=c.n()).done;){var l=r.value;s=!1,(!l.rest||l.rest[e]-l.rest[e+"_u"]<=0&&(!l.currentUserUsage||l.currentUserUsage.restaurantId!==this.selectedRestaurant||l.currentUserUsage.lunch!==t))&&(n=!1)}}catch(o){c.e(o)}finally{c.f()}}return!s&&n&&(a+="available "),t===this.lunch&&(a+="selected "),a}}},L=Y,G=(a("e127"),Object(j["a"])(L,$,F,!1,null,"592de60e",null)),V=G.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parking-slots flex w-full",class:[e.hue]},[a("div",{staticClass:"title"},[e._v("Parking:")]),a("div",{staticClass:"content w-full"},[a("div",{staticClass:"w-full flex vals"},[a("div",{staticClass:"w-1/3 val start",class:e.getClass("car"),on:{click:function(t){return e.setParking("car",t)}}},[a("font-awesome-icon",{attrs:{icon:"car"}})],1),a("div",{staticClass:"w-1/3 val",class:e.getClass("moto"),on:{click:function(t){return e.setParking("moto",t)}}},[a("font-awesome-icon",{attrs:{icon:"motorcycle"}})],1),a("div",{staticClass:"w-1/3 val last",class:e.getClass("bike"),on:{click:function(t){return e.setParking("bike",t)}}},[a("font-awesome-icon",{attrs:{icon:"bicycle"}})],1)])])])},B=[],H={computed:Object(b["a"])({},Object(f["b"])(["hue","selectedParking"])),props:["parking","days"],mounted:function(){var e=this;S.$on("selectedDays",(function(){e.$forceUpdate()}))},methods:{setParking:function(e,t){(t.path[0].classList.contains("available")||t.path[1].classList.contains("available")||t.path[2].classList.contains("available"))&&this.$emit("setParking",e)},getClass:function(e){var t="",a=!0,s=!0;for(var n in this.days){var i,r=Object(u["a"])(this.days[n]);try{for(r.s();!(i=r.n()).done;){var c=i.value;a=!1,(!c.park||c.park[e]-c.park[e+"_u"]<=0&&(!c.currentUserUsage||c.currentUserUsage.parkingId!==this.selectedParking||c.currentUserUsage.park!==e))&&(s=!1)}}catch(l){r.e(l)}finally{r.f()}}return!a&&s&&(t+="available "),e===this.parking&&(t+="selected "),t}}},K=H,J=(a("bf50"),Object(j["a"])(K,z,B,!1,null,"191cec4a",null)),W=J.exports,Z={store:jt,components:{SiteTimeSlots:M,RestaurantTimeSlots:V,ParkingSlots:W},computed:Object(b["a"])({},Object(f["b"])(["hue","currentUser","selectedSite","selectedRestaurant","selectedParking","settings"])),watch:{selectedSite:function(){this.days={}}},data:function(){return{days:{},arrivalValues:["h700","h730","h800","h830","h900","h930","h1000","h1030"],arrival:null,lunch:null,departure:null,parking:null,onSite:null}},mounted:function(){var e=this;S.$on("selectedDays",(function(t){e.days[t.startOfMonth]=t.selectedDays,e.arrival=null,e.lunch=null,e.departure=null,e.parking=null,e.onSite=!0,e.$forceUpdate()})),S.$on("clearPendingActions",(function(){e.days={},e.$forceUpdate(),S.$emit("clearDaySelections")}))},methods:{setArrival:function(e){this.arrival=this.arrival===e?null:e},setDeparture:function(e){this.departure=this.departure===e?null:e},setLunch:function(e){this.lunch=this.lunch===e?null:e},setParking:function(e){this.parking=this.parking===e?null:e},getDayCount:function(){var e=0;for(var t in this.days)e+=this.days[t].length;return e},getSettingProperty:function(e){if(this.settings){var t,a=Object(u["a"])(this.settings);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.key==e)return"true"==s.value}}catch(n){a.e(n)}finally{a.f()}}return!1},saveBookings:function(){var e=this;if(e.getSettingProperty("manageArrivals")&&e.onSite&&!e.arrival)jt.commit("SET_INFO","Error: missing arrival info");else if(e.getSettingProperty("manageDepartures")&&e.onSite&&!e.departure)jt.commit("SET_INFO","Error: missing departure info");else{var t=[],a=k()();for(var s in this.days){var n=k()(s);n.isBefore(a)&&(a=n);var i,r=Object(u["a"])(this.days[s]);try{for(r.s();!(i=r.n()).done;){var c=i.value;t.push({user:e.currentUser,siteId:e.selectedSite,restaurantId:e.selectedRestaurant,parkingId:e.selectedParking,date:c.site.date,arrival:e.arrival,departure:e.departure,lunch:e.lunch,parkingType:e.parking,onSite:e.onSite||!!e.arrival,offSite:!e.onSite})}}catch(l){r.e(l)}finally{r.f()}}jt.dispatch("saveCurrentUserUsages",{user:e.currentUser,startDate:a.format("YYYY-MM-DD"),userDays:t}),e.days={},S.$emit("clearDaySelections")}},deleteBookings:function(){var e=this,t=[],a=k()();for(var s in this.days){var n=k()(s);n.isBefore(a)&&(a=n);var i,r=Object(u["a"])(this.days[s]);try{for(r.s();!(i=r.n()).done;){var c=i.value;t.push({user:e.currentUser,site:{id:e.selectedSite.id},date:c.site.date})}}catch(l){r.e(l)}finally{r.f()}}jt.dispatch("deleteCurrentUserUsages",{user:e.currentUser,site:e.selectedSite.id,startDate:a.format("YYYY-MM-DD"),userDays:t}),e.days={},S.$emit("clearDaySelections")}}},Q=Z,q=(a("3d56"),Object(j["a"])(Q,P,E,!1,null,"00737a19",null)),X=q.exports,ee={name:"Home",store:jt,components:{CalendarEditor:O,BookingPanel:X},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","settings","siteDefinitions","restaurantDefinitions","parkingDefinitions","selectedSite","selectedRestaurant","selectedParking","siteUsages","restaurantUsages","parkingUsages"])),{},{startsOfMonth:function(){var e,t=[],a=Object(u["a"])(this.siteUsages);try{for(a.s();!(e=a.n()).done;){var s=e.value,n=k()(s.date).startOf("month").format("YYYY-MM-DD");t.indexOf(n)<0&&t.push(n)}}catch(i){a.e(i)}finally{a.f()}return t.sort(),t}}),watch:{siteDefinitions:function(e){e&&this.selectedSite&&this.checkDefaults(this.getObj(e,this.selectedSite))},selectedSite:function(e){e&&this.siteDefinitions&&this.checkDefaults(this.getObj(this.siteDefinitions,e))}},data:function(){return{listSites:null}},methods:{getObj:function(e,t){if(e){var a,s=Object(u["a"])(e);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(n.id===t)return n}}catch(i){s.e(i)}finally{s.f()}}return null},getSettingProperty:function(e){if(this.settings){var t,a=Object(u["a"])(this.settings);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.key==e)return"true"==s.value}}catch(n){a.e(n)}finally{a.f()}}return!1},checkDefaults:function(e){var t=this;null==t.selectedRestaurant&&e.defaultRestaurant&&t.setSelectedRestaurant(e.defaultRestaurant),null==t.selectedParking&&e.defaultParking&&t.setSelectedParking(e.defaultParking)},setSelectedSite:function(e){e&&jt.dispatch("changeSelectedSite",e.id)},setSelectedRestaurant:function(e){e&&jt.dispatch("changeSelectedRestaurant",e.id)},setSelectedParking:function(e){e&&jt.dispatch("changeSelectedParking",e.id)}}},te=ee,ae=(a("8892"),Object(j["a"])(te,h,g,!1,null,"bfae6a72",null)),se=ae.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-2/3 center-panel",class:[e.hue],attrs:{id:"settings"}},[a("div",{staticClass:"wrapper w-full"},[a("div",{staticClass:"section features w-full"},[a("div",{staticClass:"title text-left pl-3 flex justify-between"},[a("div",[e._v("Management features")]),a("div",{staticClass:"actions"},[a("div",{staticClass:"button save",on:{click:function(t){return e.saveSettings()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1)])]),a("div",{staticClass:"content"},[a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageOnSites,callback:function(t){e.manageOnSites=t},expression:"manageOnSites"}}),a("div",{staticClass:"comment"},[e._v("On site")])],1),a("div",{staticClass:"item flex odd"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageArrivals,callback:function(t){e.manageArrivals=t},expression:"manageArrivals"}}),a("div",{staticClass:"comment"},[e._v("Arrivals")])],1),a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageDepartures,callback:function(t){e.manageDepartures=t},expression:"manageDepartures"}}),a("div",{staticClass:"comment"},[e._v("Departures")])],1),a("div",{staticClass:"item flex odd"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageParkings,callback:function(t){e.manageParkings=t},expression:"manageParkings"}}),a("div",{staticClass:"comment"},[e._v("Parkings")])],1),a("div",{staticClass:"item flex even"},[a("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#1a93b7",unchecked:"#cccccc",disabled:"#aaaaaa"},sync:!0},model:{value:e.manageRestaurants,callback:function(t){e.manageRestaurants=t},expression:"manageRestaurants"}}),a("div",{staticClass:"comment"},[e._v("Restaurants")])],1)])]),a("div",{staticClass:"section users w-full"},[a("div",{staticClass:"title text-left pl-3 flex justify-between"},[a("div",[e._v("Users management")]),a("div",{staticClass:"actions flex"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"appareance-none pl-2 rounded border focus:outline-none",attrs:{placeholder:"filter..."},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadUsers()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1),a("div",{staticClass:"button save",on:{click:function(t){return e.saveUsers()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1)])]),a("div",{staticClass:"content"},e._l(e.roles,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"role-title flex justify-between"},[a("div",{staticClass:"value"},[e._v(e._s(s))]),a("div",{staticClass:"actions flex"},[e.editedRole!=s?[a("div",{staticClass:"button save",on:{click:function(t){return e.editUsers(s)}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1)]:e._e(),e.editedRole==s?[a("div",{staticClass:"button save",on:{click:function(t){return e.cancelUsersEdition()}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" cancel ")],1),a("div",{staticClass:"button save",on:{click:function(t){return e.saveUsersEdition()}}},[a("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" ok ")],1)]:e._e()],2)]),e.editedRole==s?a("div",{staticClass:"user-editor-wrapper"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editedUsers,expression:"editedUsers"}],staticClass:"w-full user-editor",attrs:{placeholder:"ajoutez plusieurs lignes"},domProps:{value:e.editedUsers},on:{input:function(t){t.target.composing||(e.editedUsers=t.target.value)}}})]):e._e(),a("div",{staticClass:"users flex flex-wrap"},[e._l(t,(function(t){return[e.isFiltered(t,e.filter)?a("div",{key:t.name,staticClass:"user",class:[t.status]},[e._v(e._s(t.name))]):e._e()]}))],2)])})),0)])])])},ie=[],re=(a("b0c0"),a("ac1f"),a("5319"),a("1276"),{name:"Settings",store:jt,computed:Object(b["a"])({},Object(f["b"])(["hue","settings","userRoles"])),data:function(){return{manageOnSites:null,manageArrivals:null,manageDepartures:null,manageParkings:null,manageRestaurants:null,roles:null,filter:null,editedRole:null,editedUsers:null}},watch:{settings:function(e){this.updateFromSettings(e)},userRoles:function(e){this.updateFromUserRoles(e),this.$forceUpdate()}},mounted:function(){this.updateFromUserRoles(this.userRoles),this.updateFromSettings(this.settings)},methods:{isFiltered:function(e,t){return null==t||""==t||e.name.indexOf(t)>=0},updateFromUserRoles:function(e){if(e){this.roles={admin:[],user:[],reporter:[]};var t,a=Object(u["a"])(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.roles[s.role]||(this.roles[s.role]=[]),this.roles[s.role].push({name:s.user,status:"ok"})}}catch(i){a.e(i)}finally{a.f()}for(var n in this.roles)this.roles[n].sort()}},updateFromSettings:function(e){if(e){var t,a=Object(u["a"])(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;"manageOnSites"==s.key?this.manageOnSites="true"==s.value:"manageArrivals"==s.key?this.manageArrivals="true"==s.value:"manageDepartures"==s.key?this.manageDepartures="true"==s.value:"manageParkings"==s.key?this.manageParkings="true"==s.value:"manageRestaurants"==s.key&&(this.manageRestaurants="true"==s.value)}}catch(n){a.e(n)}finally{a.f()}}},saveSettings:function(){var e=this,t=[{key:"manageOnSites",value:e.manageOnSites?"true":"false"},{key:"manageArrivals",value:e.manageArrivals?"true":"false"},{key:"manageDepartures",value:e.manageDepartures?"true":"false"},{key:"manageParkings",value:e.manageParkings?"true":"false"},{key:"manageRestaurants",value:e.manageRestaurants?"true":"false"}];jt.dispatch("saveSettings",t)},reloadUsers:function(){jt.dispatch("loadUserRoles")},editUsers:function(e){if(this.editedRole==e)this.editedRole=null,this.editedUsers=null;else{this.editedUsers="";var t,a=Object(u["a"])(this.roles[e]);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.editedUsers+=s.name+" "}}catch(n){a.e(n)}finally{a.f()}this.editedRole=e}},cancelUsersEdition:function(){this.editedRole=null,this.editedUsers=null},saveUsersEdition:function(){var e=[];if(this.editedUsers&&this.editedRole){var t,a=Object(u["a"])(this.userRoles);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.role==this.editedRole&&e.push({name:s.user,status:"ok"})}}catch(w){a.e(w)}finally{a.f()}var n=[];if(this.editedUsers){var i,r=this.editedUsers.split(/[^A-Za-z_]/),c=Object(u["a"])(r);try{for(c.s();!(i=c.n()).done;){var l=i.value;if(l.length>0){var o,d=l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),f=!1,v=Object(u["a"])(n);try{for(v.s();!(o=v.n()).done;){var p=o.value;p.name==d&&(f=!0)}}catch(w){v.e(w)}finally{v.f()}if(!f)for(var m=0;m<e.length;m++)if(e[m].name==d){n.push(e[m]),e.splice(m,1),f=!0;break}f||n.push({name:d,status:"new"})}}}catch(w){c.e(w)}finally{c.f()}var h,g=Object(u["a"])(e);try{for(g.s();!(h=g.n()).done;){var b=h.value;b.status="delete",n.push(b)}}catch(w){g.e(w)}finally{g.f()}}this.roles[this.editedRole]=n}this.editedRole=null,this.editedUsers=null},saveUsers:function(){var e=[];for(var t in this.roles){var a,s=Object(u["a"])(this.roles[t]);try{for(s.s();!(a=s.n()).done;){var n=a.value;"delete"!=n.status&&e.push({user:n.name,role:t})}}catch(i){s.e(i)}finally{s.f()}}jt.dispatch("saveUserRoles",e)}}}),ce=re,le=(a("b280"),Object(j["a"])(ce,ne,ie,!1,null,"4cfb4f1e",null)),oe=le.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full center-panel",class:[e.hue],attrs:{id:"sites"}},[a("div",{staticClass:"wrapper w-full p-4"},[a("div",{staticClass:"create w-full select-none"},[a("div",{staticClass:"buttons flex"},[a("span",{staticClass:"button create-button ml-3",on:{click:function(t){e.createdSite=null==e.createdSite?{name:"",description:"",tags:"#France #Paris"}:null}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"plus"}}),e._v(" create site ")],1),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadSites()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1)]),null!=e.createdSite?a("div",{staticClass:"content w-full"},[a("div",{staticClass:"flex items-center mb-2"},[e._m(0),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.name,expression:"createdSite.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:e.createdSite.name},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"name",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(1),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.description,expression:"createdSite.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:e.createdSite.description},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"description",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(2),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdSite.tags,expression:"createdSite.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:e.createdSite.tags},on:{input:function(t){t.target.composing||e.$set(e.createdSite,"tags",t.target.value)}}})])]),a("div",{staticClass:"buttons select-none flex justify-end"},[a("span",{staticClass:"button cancel",on:{click:function(t){e.createdSite=null}}},[e._v("cancel")]),a("span",{staticClass:"button",on:{click:function(t){return e.createSite(e.createdSite)}}},[e._v("save")])])]):e._e()]),a("div",{staticClass:"w-full"},e._l(e.orderedSites,(function(t){return a("div",{key:t.id,staticClass:"site"},[t.definition?[a("div",{staticClass:"main select-none"},[a("div",{staticClass:"flex justify-end pr-2"},[a("div",{staticClass:"buttons flex"},[t!=e.editedSite?[a("span",{staticClass:"button edit obfuscable",on:{click:function(a){e.editedSite=t}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1),a("span",{staticClass:"button delete obfuscable",on:{click:function(a){return e.deleteSite(t)}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" delete ")],1)]:e._e(),a("span",{staticClass:"button save obfuscable",on:{click:function(a){return e.saveSite(t)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1),a("span",{staticClass:"menu pl-2 cursor-pointer"},[a("font-awesome-icon",{attrs:{icon:"bars"}})],1)],2)]),a("div",{staticClass:"flex"},[t!=e.editedSite?[a("div",{staticClass:"name value whitespace-no-wrap"},[e._v(e._s(t.definition.name))]),a("div",{staticClass:"description value w-full"},[e._v(e._s(t.definition.description))])]:e._e(),t==e.editedSite?[a("div",{staticClass:"name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.name,expression:"site.definition.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:t.definition.name},on:{input:function(a){a.target.composing||e.$set(t.definition,"name",a.target.value)}}})]),a("div",{staticClass:"description w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.description,expression:"site.definition.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:t.definition.description},on:{input:function(a){a.target.composing||e.$set(t.definition,"description",a.target.value)}}})])]:e._e()],2),t!=e.editedSite&&t.definition.tags?[a("div",{staticClass:"flex"},[a("div",{staticClass:"tags flex w-1/3"},e._l(t.definition.tags.split(" "),(function(t){return a("span",{key:t,staticClass:"tag"},[e._v(e._s(t))])})),0),a("div",{staticClass:"restaurant flex w-1/3"},[a("font-awesome-icon",{attrs:{icon:"utensils"}}),a("div",{staticClass:"value"},[e._v(e._s(t.definition.defaultRestaurant?t.definition.defaultRestaurant.name:"none"))])],1),a("div",{staticClass:"parking flex w-1/3"},[a("font-awesome-icon",{attrs:{icon:"parking"}}),a("div",{staticClass:"value"},[e._v(e._s(t.definition.defaultParking?t.definition.defaultParking.name:"none"))])],1)])]:e._e(),t==e.editedSite?[a("div",{staticClass:"flex"},[a("div",{staticClass:"tags w-1/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.tags,expression:"site.definition.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:t.definition.tags},on:{input:function(a){a.target.composing||e.$set(t.definition,"tags",a.target.value)}}})]),a("div",{staticClass:"restaurant flex w-1/3"},[a("v-select",{staticClass:"white",attrs:{options:e.listRestaurants},model:{value:e.selectedRestaurant,callback:function(t){e.selectedRestaurant=t},expression:"selectedRestaurant"}})],1),a("div",{staticClass:"parking flex w-1/3"},[a("v-select",{staticClass:"white",attrs:{options:e.listParkings},model:{value:e.selectedParking,callback:function(t){e.selectedParking=t},expression:"selectedParking"}})],1)])]:e._e()],2)]:e._e(),a("div",{staticClass:"capacities w-full"},[a("SiteCapacities",{attrs:{site:t,saveSite:e.saveSite}})],1)],2)})),0)])])},de=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-name"}},[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-desc"}},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-path"}},[e._v("Tags")])])}],fe=(a("fb6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capabilities center-panel",class:[e.hue]},[a("ag-grid-vue",{class:{"ag-theme-alpine":"light"==e.hue,"ag-theme-alpine-dark":"dark"==e.hue,"w-full":!0},staticStyle:{height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"footer flex justify-end"},[a("div",{staticClass:"button plus",on:{click:function(t){return e.createRow()}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"button minus",on:{click:function(t){return e.getSelectedRows()}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1)])],1)}),ve=[],pe=(a("4160"),a("a9e3"),a("159b"),a("401b")),me={props:["site","saveSite"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{site:function(){this.rowData=this.site.capacities}},data:function(){return{columnDefs:null,rowData:null}},components:{AgGridVue:pe["AgGridVue"]},beforeMount:function(){this.columnDefs=[{headerName:"Date",children:[{headerName:"Start date",field:"startDate",editable:!0,sortable:!0,width:100,valueParser:this.dateParser,valueFormatter:this.dateFormatter},{headerName:"End date",field:"endDate",editable:!0,sortable:!0,width:100,valueParser:this.dateParser,valueFormatter:this.dateFormatter}]},{headerName:"Presence",children:[{headerName:"",field:"onSite",editable:!0,width:70,minwidth:60,valueParser:this.numberParser}]},{headerName:"Arrival",children:[{headerName:"7:00",field:"arrival_700",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"7:30",field:"arrival_730",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"8:00",field:"arrival_800",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"8:30",field:"arrival_830",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"9:00",field:"arrival_900",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"9:30",field:"arrival_930",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"10:00",field:"arrival_1000",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"10:30",field:"arrival_1030",editable:!0,width:50,minwidth:40,valueParser:this.numberParser}]},{headerName:"Departure",children:[{headerName:"17:00",field:"departure_1700",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"17:30",field:"departure_1730",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"18:00",field:"departure_1800",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"18:30",field:"departure_1830",editable:!0,width:50,minwidth:40,valueParser:this.numberParser},{headerName:"19:00",field:"departure_1900",editable:!0,width:50,minwidth:40,valueParser:this.numberParser}]}],this.rowData=this.site.capacities},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit()},getSelectedRows:function(){var e=this,t=this.gridApi.getSelectedNodes();t.forEach((function(t){e.rowData.splice(e.rowData.indexOf(t.data),1)}))},numberParser:function(e){return Number(e.newValue)},dateParser:function(e){return void 0!=e.newValue?k()(e.newValue).format("YYYY-MM-DD"):null},dateFormatter:function(e){return e.value?k()(e.value).format("DD/MM/YYYY"):null},createRow:function(){var e=k()().add(1,"days").format("YYYY-MM-DD");this.rowData.push({startDate:e,endDate:e,onSite:0,arrival_700:0,arrival_730:0,arrival_800:0,arrival_830:0,arrival_900:0,arrival_930:0,arrival_1000:0,arrival_1030:0,departure_1700:0,departure_1730:0,departure_1800:0,departure_1830:0,departure_1900:0})}}},he=me,ge=Object(j["a"])(he,fe,ve,!1,null,null,null),be=ge.exports,we={store:jt,components:{SiteCapacities:be},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","sites","restaurants","parkings"])),{},{orderedSites:function(){return this.sites.slice().sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))},listRestaurants:function(){var e,t=[{label:"none",code:null}],a=Object(u["a"])(this.restaurants);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push({label:s.definition.name,code:s.definition.id})}}catch(n){a.e(n)}finally{a.f()}return t},listParkings:function(){var e,t=[{label:"none",code:null}],a=Object(u["a"])(this.parkings);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push({label:s.definition.name,code:s.definition.id})}}catch(n){a.e(n)}finally{a.f()}return t}}),watch:{selectedRestaurant:function(e){e&&this.editedSite&&(this.editedSite.definition.defaultRestaurant=null!=this.selectedRestaurant.code?{id:this.selectedRestaurant.code}:null)},selectedParking:function(e){e&&this.editedSite&&(this.editedSite.definition.defaultParking=null!=this.selectedParking.code?{id:this.selectedParking.code}:null)},editedSite:function(e){e&&(e.definition.defaultRestaurant&&(this.selectedRestaurant={label:e.definition.defaultRestaurant.name,code:e.definition.defaultRestaurant.id}),e.definition.defaultParking&&(this.selectedParking={label:e.definition.defaultParking.name,code:e.definition.defaultParking.id}))}},data:function(){return{createdSite:null,editedSite:null,selectedRestaurant:null,selectedParking:null}},methods:{createSite:function(e,t){var a=this;p.a.post("api/site/",{definition:e,capacities:t}).then((function(e){e.data&&e.data.definition&&e.data.definition.name?jt.dispatch("setInfo","Site "+e.data.definition.name+" successfully created"):(console.log(e.data),jt.commit("SET_INFO","Error while creating site")),jt.dispatch("loadSites")})).catch((function(e){jt.dispatch("setInfo","Error while creating site: "+(e.response&&e.response.data?e.response.data.message:e.message))})),a.createdSite=null},reloadSites:function(){this.createdSite=null,this.editedSite=null,this.selectedRestaurant=null,jt.dispatch("reloadAll")},saveSite:function(e){var t=this;p.a.post("api/site/",e).then((function(){jt.dispatch("setInfo","Site "+e.definition.name+"  saved."),t.reloadSites()})).catch((function(e){jt.dispatch("setInfo","Error while saving site: "+(e.response&&e.response.data?e.response.data.message:e.message))}))},deleteSite:function(e){var t=this;p.a.delete("api/site/"+e.definition.id).then((function(){jt.dispatch("setInfo","Site "+e.definition.name+"  deleted."),t.reloadSites()})).catch((function(e){jt.dispatch("setInfo","Error while deleting site: "+(e.response&&e.response.data?e.response.data.message:e.message))}))}}},ye=we,_e=(a("1625"),Object(j["a"])(ye,ue,de,!1,null,"38e235fb",null)),ke=_e.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",class:[e.hue],attrs:{id:"restaurants"}},[a("div",{staticClass:"wrapper w-full p-4"},[a("div",{staticClass:"create w-full select-none"},[a("div",{staticClass:"buttons flex"},[a("span",{staticClass:"button create-button ml-3",on:{click:function(t){e.createdRestaurant=null==e.createdRestaurant?{name:"",description:"",tags:"#France #Paris"}:null}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"plus"}}),e._v(" create restaurant ")],1),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadRestaurants()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1)]),null!=e.createdRestaurant?a("div",{staticClass:"content w-full"},[a("div",{staticClass:"flex items-center mb-2"},[e._m(0),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.name,expression:"createdRestaurant.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:e.createdRestaurant.name},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"name",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(1),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.description,expression:"createdRestaurant.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:e.createdRestaurant.description},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"description",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(2),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdRestaurant.tags,expression:"createdRestaurant.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:e.createdRestaurant.tags},on:{input:function(t){t.target.composing||e.$set(e.createdRestaurant,"tags",t.target.value)}}})])]),a("div",{staticClass:"buttons select-none flex justify-end"},[a("span",{staticClass:"button cancel",on:{click:function(t){e.createdRestaurant=null}}},[e._v("cancel")]),a("span",{staticClass:"button",on:{click:function(t){return e.createRestaurant(e.createdRestaurant)}}},[e._v("save")])])]):e._e()]),a("div",{staticClass:"w-full"},e._l(e.orderedRestaurants,(function(t){return a("div",{key:t.id,staticClass:"restaurant"},[t.definition?[a("div",{staticClass:"main select-none"},[a("div",{staticClass:"flex justify-end pr-2"},[a("div",{staticClass:"buttons flex"},[t!=e.editedRestaurant?[a("span",{staticClass:"button edit obfuscable",on:{click:function(a){e.editedRestaurant=t}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1),a("span",{staticClass:"button delete obfuscable",on:{click:function(a){return e.deleteRestaurant(t)}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" delete ")],1)]:e._e(),a("span",{staticClass:"button save obfuscable",on:{click:function(a){return e.saveRestaurant(t)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1),a("span",{staticClass:"menu pl-2 cursor-pointer",on:{click:function(a){e.expandedRestaurant=t==e.expandedRestaurant?null:t}}},[a("font-awesome-icon",{attrs:{icon:"bars"}})],1)],2)]),a("div",{staticClass:"flex"},[t!=e.editedRestaurant?[a("div",{staticClass:"name value whitespace-no-wrap"},[e._v(e._s(t.definition.name))]),a("div",{staticClass:"description value w-full"},[e._v(" "+e._s(t.definition.description)+" ")])]:e._e(),t==e.editedRestaurant?[a("div",{staticClass:"name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.name,expression:"restaurant.definition.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:t.definition.name},on:{input:function(a){a.target.composing||e.$set(t.definition,"name",a.target.value)}}})]),a("div",{staticClass:"description w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.description,expression:"restaurant.definition.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:t.definition.description},on:{input:function(a){a.target.composing||e.$set(t.definition,"description",a.target.value)}}})])]:e._e()],2),t!=e.editedRestaurant&&t.definition.tags?[a("div",{staticClass:"tags flex"},e._l(t.definition.tags.split(" "),(function(t){return a("span",{key:t,staticClass:"tag"},[e._v(e._s(t))])})),0)]:e._e(),t==e.editedRestaurant?[a("div",{staticClass:"tags w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.tags,expression:"restaurant.definition.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:t.definition.tags},on:{input:function(a){a.target.composing||e.$set(t.definition,"tags",a.target.value)}}})])]:e._e()],2)]:e._e(),a("div",{staticClass:"capacities w-full"},[a("RestaurantCapacities",{attrs:{restaurant:t,saveRestaurant:e.saveRestaurant}})],1)],2)})),0)])])},Se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-name"}},[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-desc"}},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-path"}},[e._v("Tags")])])}],xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capabilities",class:[e.hue]},[a("ag-grid-vue",{class:{"ag-theme-alpine":"light"==e.hue,"ag-theme-alpine-dark":"dark"==e.hue,"w-full":!0},staticStyle:{height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"footer flex justify-end"},[a("div",{staticClass:"button plus",on:{click:function(t){return e.createRow()}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"button minus",on:{click:function(t){return e.getSelectedRows()}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1)])],1)},Re=[],je={props:["restaurant","saveRestaurant"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{restaurant:function(){this.rowData=this.restaurant.capacities}},data:function(){return{columnDefs:null,rowData:null}},components:{AgGridVue:pe["AgGridVue"]},beforeMount:function(){this.columnDefs=[{headerName:"Date",children:[{headerName:"Start date",field:"startDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter},{headerName:"End date",field:"endDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter}]},{headerName:"Lunch time",children:[{headerName:"11:30 > 12:00",field:"arrival_1130",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"12:00 > 12:30",field:"arrival_1200",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"12:30 > 13:00",field:"arrival_1230",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"13:00 > 13:30",field:"arrival_1300",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"13:30 > 14:00",field:"arrival_1330",editable:!0,width:110,minwidth:45,valueParser:this.numberParser}]}],this.rowData=this.restaurant.capacities},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit()},getSelectedRows:function(){var e=this,t=this.gridApi.getSelectedNodes();t.forEach((function(t){e.rowData.splice(e.rowData.indexOf(t.data),1)}))},numberParser:function(e){return Number(e.newValue)},dateParser:function(e){return void 0!=e.newValue?k()(e.newValue).format("YYYY-MM-DD"):null},dateFormatter:function(e){return e.value?k()(e.value).format("DD/MM/YYYY"):null},createRow:function(){var e=k()().add(1,"days").format("YYYY-MM-DD");this.rowData.push({startDate:e,endDate:e,arrival_1130:0,arrival_1200:0,arrival_1230:0,arrival_1300:0,arrival_1330:0})}}},Ue=je,Oe=Object(j["a"])(Ue,xe,Re,!1,null,null,null),Pe=Oe.exports,Ee={store:jt,components:{RestaurantCapacities:Pe},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","restaurants"])),{},{orderedRestaurants:function(){return this.restaurants.slice().sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))}}),data:function(){return{createdRestaurant:null,expandedRestaurant:null,editedRestaurant:null}},methods:{createRestaurant:function(e,t){var a=this;p.a.post("api/restaurant/",{definition:e,capacities:t}).then((function(e){e.data&&e.data.definition&&e.data.definition.name?jt.dispatch("setInfo","Restaurant "+e.data.definition.name+" successfully created"):jt.commit("SET_INFO","Error while creating restaurant"),jt.dispatch("loadRestaurants")})).catch((function(e){jt.commit("SET_INFO","Error while creating restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))})),a.createdRestaurant=null},reloadRestaurants:function(){this.createdRestaurant=null,this.editedRestaurant=null,jt.dispatch("reloadAll")},saveRestaurant:function(e){var t=this;p.a.post("api/restaurant/",e).then((function(){jt.dispatch("setInfo","Restaurant "+e.definition.name+"  saved."),t.reloadRestaurants()})).catch((function(e){jt.commit("SET_INFO","Error while saving restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))}))},deleteRestaurant:function(e){var t=this;p.a.delete("api/restaurant/"+e.definition.id).then((function(){jt.dispatch("setInfo","Restaurant "+e.definition.name+"  deleted."),t.reloadRestaurants()})).catch((function(e){jt.commit("SET_INFO","Error while deleting restaurant: "+(e.response&&e.response.data?e.response.data.message:e.message))}))}}},De=Ee,Ae=(a("6780"),Object(j["a"])(De,Ce,Se,!1,null,"046cd296",null)),Ne=Ae.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full center-panel",class:[e.hue],attrs:{id:"parkings"}},[a("div",{staticClass:"wrapper w-full p-4"},[a("div",{staticClass:"create w-full select-none"},[a("div",{staticClass:"buttons flex"},[a("span",{staticClass:"button create-button ml-3",on:{click:function(t){e.createdParking=null==e.createdParking?{name:"",description:"",tags:"#France #Paris"}:null}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"plus"}}),e._v(" create parking ")],1),a("span",{staticClass:"button ml-1",on:{click:function(t){return e.reloadParkings()}}},[a("font-awesome-icon",{staticClass:"menu",attrs:{icon:"sync-alt"}}),e._v(" reload ")],1)]),null!=e.createdParking?a("div",{staticClass:"content w-full"},[a("div",{staticClass:"flex items-center mb-2"},[e._m(0),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdParking.name,expression:"createdParking.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:e.createdParking.name},on:{input:function(t){t.target.composing||e.$set(e.createdParking,"name",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(1),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdParking.description,expression:"createdParking.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:e.createdParking.description},on:{input:function(t){t.target.composing||e.$set(e.createdParking,"description",t.target.value)}}})])]),a("div",{staticClass:"flex items-center mb-2"},[e._m(2),a("div",{staticClass:"w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createdParking.tags,expression:"createdParking.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:e.createdParking.tags},on:{input:function(t){t.target.composing||e.$set(e.createdParking,"tags",t.target.value)}}})])]),a("div",{staticClass:"buttons select-none flex justify-end"},[a("span",{staticClass:"button cancel",on:{click:function(t){e.createdParking=null}}},[e._v("cancel")]),a("span",{staticClass:"button",on:{click:function(t){return e.createParking(e.createdParking)}}},[e._v("save")])])]):e._e()]),a("div",{staticClass:"w-full"},e._l(e.orderedParkings,(function(t){return a("div",{key:t.id,staticClass:"parking"},[t.definition?[a("div",{staticClass:"main select-none"},[a("div",{staticClass:"flex justify-end pr-2"},[a("div",{staticClass:"buttons flex"},[t!=e.editedParking?[a("span",{staticClass:"button edit obfuscable",on:{click:function(a){e.editedParking=t}}},[a("font-awesome-icon",{attrs:{icon:"pen"}}),e._v(" edit ")],1),a("span",{staticClass:"button delete obfuscable",on:{click:function(a){return e.deleteParking(t)}}},[a("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" delete ")],1)]:e._e(),a("span",{staticClass:"button save obfuscable",on:{click:function(a){return e.saveParking(t)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" save ")],1),a("span",{staticClass:"menu pl-2 cursor-pointer",on:{click:function(a){e.expandedParking=t==e.expandedParking?null:t}}},[a("font-awesome-icon",{attrs:{icon:"bars"}})],1)],2)]),a("div",{staticClass:"flex"},[t!=e.editedParking?[a("div",{staticClass:"name value whitespace-no-wrap"},[e._v(e._s(t.definition.name))]),a("div",{staticClass:"description value w-full"},[e._v(" "+e._s(t.definition.description)+" ")])]:e._e(),t==e.editedParking?[a("div",{staticClass:"name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.name,expression:"parking.definition.name"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-name",type:"text"},domProps:{value:t.definition.name},on:{input:function(a){a.target.composing||e.$set(t.definition,"name",a.target.value)}}})]),a("div",{staticClass:"description w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.description,expression:"parking.definition.description"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-desc",type:"text"},domProps:{value:t.definition.description},on:{input:function(a){a.target.composing||e.$set(t.definition,"description",a.target.value)}}})])]:e._e()],2),t!=e.editedParking&&t.definition.tags?[a("div",{staticClass:"tags flex"},e._l(t.definition.tags.split(" "),(function(t){return a("span",{key:t,staticClass:"tag"},[e._v(e._s(t))])})),0)]:e._e(),t==e.editedParking?[a("div",{staticClass:"tags w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.definition.tags,expression:"parking.definition.tags"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"inline-path",type:"text"},domProps:{value:t.definition.tags},on:{input:function(a){a.target.composing||e.$set(t.definition,"tags",a.target.value)}}})])]:e._e()],2)]:e._e(),a("div",{staticClass:"capacities w-full"},[a("ParkingCapacities",{attrs:{parking:t,saveParking:e.saveParking}})],1)],2)})),0)])])},Ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-name"}},[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-desc"}},[e._v("Description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-1/3"},[a("label",{staticClass:"block text-right mb-1 mb-0 pr-4",attrs:{for:"inline-path"}},[e._v("Tags")])])}],Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capabilities",class:[e.hue]},[a("ag-grid-vue",{class:{"ag-theme-alpine":"light"==e.hue,"ag-theme-alpine-dark":"dark"==e.hue,"w-full":!0},staticStyle:{height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple"},on:{"grid-ready":e.onGridReady}}),a("div",{staticClass:"footer flex justify-end"},[a("div",{staticClass:"button plus",on:{click:function(t){return e.createRow()}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"button minus",on:{click:function(t){return e.getSelectedRows()}}},[a("font-awesome-icon",{attrs:{icon:"minus"}})],1)])],1)},$e=[],Fe={props:["parking","saveParking"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{parking:function(){this.rowData=this.parking.capacities}},data:function(){return{columnDefs:null,rowData:null}},components:{AgGridVue:pe["AgGridVue"]},beforeMount:function(){this.columnDefs=[{headerName:"Date",children:[{headerName:"Start date",field:"startDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter},{headerName:"End date",field:"endDate",editable:!0,sortable:!0,width:150,valueParser:this.dateParser,valueFormatter:this.dateFormatter}]},{headerName:"Parking",children:[{headerName:"Car",field:"car",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"Motorcycle",field:"moto",editable:!0,width:110,minwidth:45,valueParser:this.numberParser},{headerName:"Bike",field:"bike",editable:!0,width:110,minwidth:45,valueParser:this.numberParser}]}],this.rowData=this.parking.capacities},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit()},getSelectedRows:function(){var e=this,t=this.gridApi.getSelectedNodes();t.forEach((function(t){e.rowData.splice(e.rowData.indexOf(t.data),1)}))},numberParser:function(e){return Number(e.newValue)},dateParser:function(e){return void 0!=e.newValue?k()(e.newValue).format("YYYY-MM-DD"):null},dateFormatter:function(e){return e.value?k()(e.value).format("DD/MM/YYYY"):null},createRow:function(){var e=k()().add(1,"days").format("YYYY-MM-DD");this.rowData.push({startDate:e,endDate:e,car:0,moto:0,bike:0})}}},Ye=Fe,Le=Object(j["a"])(Ye,Me,$e,!1,null,null,null),Ge=Le.exports,Ve={store:jt,components:{ParkingCapacities:Ge},computed:Object(b["a"])(Object(b["a"])({},Object(f["b"])(["hue","parkings"])),{},{orderedParkings:function(){return this.parkings.slice().sort((function(e,t){return e.definition.name.localeCompare(t.definition.name)}))}}),data:function(){return{createdParking:null,expandedParking:null,editedParking:null}},methods:{createParking:function(e,t){var a=this;p.a.post("api/parking/",{definition:e,capacities:t}).then((function(e){e.data&&e.data.definition&&e.data.definition.name?jt.commit("SET_INFO","Parking "+e.data.definition.name+" successfully created"):jt.commit("SET_INFO","Error while creating Parking"),jt.dispatch("loadParkings")})).catch((function(e){jt.commit("SET_INFO","Error while creating Parking: "+(e.response&&e.response.data?e.response.data.message:e.message))})),a.createdParking=null},reloadParkings:function(){this.createdParking=null,this.editedParking=null,jt.dispatch("reloadAll")},saveParking:function(e){var t=this;p.a.post("api/parking/",e).then((function(){jt.dispatch("setInfo","Parking "+e.definition.name+"  saved."),t.reloadParkings()})).catch((function(e){jt.commit("SET_INFO","Error while saving Parking: "+(e.response&&e.response.data?e.response.data.message:e.message))}))},deleteParking:function(e){var t=this;p.a.delete("api/parking/"+e.definition.id).then((function(){jt.dispatch("setInfo","Parking "+e.definition.name+"  deleted."),t.reloadParkings()})).catch((function(e){jt.commit("SET_INFO","Error while deleting Parking: "+(e.response&&e.response.data?e.response.data.message:e.message))}))}}},ze=Ve,Be=(a("7419"),Object(j["a"])(ze,Te,Ie,!1,null,"6dc06756",null)),He=Be.exports,Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reports w-full flex",class:[e.hue]},[s("div",{staticClass:"center-panel w-full"},[s("div",{staticClass:"section"},[s("div",{staticClass:"title"},[e._v("Sites")]),e._l(e.sites,(function(t){return s("div",{key:t.definition.id,staticClass:"report"},[s("div",{staticClass:"subtitle w-1/2 text-left"},[e._v(e._s(t.definition.name))]),s("div",{staticClass:"content"},[s("SiteReport",{attrs:{values:e.siteData[t.definition.id],type:"site",name:"site-"+t.definition.id,startDate:e.date,nb:5}})],1)])}))],2),s("div",{staticClass:"section"},[s("div",{staticClass:"title"},[e._v("Restaurants")]),e._l(e.restaurants,(function(t){return s("div",{key:t.definition.id,staticClass:"report"},[s("div",{staticClass:"subtitle w-1/2 text-left"},[e._v(e._s(t.definition.name))]),s("div",{staticClass:"content"},[s("RestaurantReport",{attrs:{values:e.restaurantData[t.definition.id],name:"restaurant-"+t.definition.id,startDate:e.date,nb:5}})],1)])}))],2),s("div",{staticClass:"section"},[s("div",{staticClass:"title"},[e._v("Parkings")]),e._l(e.parkings,(function(t){return s("div",{key:t.definition.id,staticClass:"report"},[s("div",{staticClass:"subtitle w-1/2 text-left"},[e._v(e._s(t.definition.name))]),s("div",{staticClass:"content"},[s("ParkingReport",{attrs:{values:e.parkingData[t.definition.id],name:"parking-"+t.definition.id,startDate:e.date,nb:5}})],1)])}))],2)]),s("div",{staticClass:"right-panel select-none overflow-y-auto"},[s("div",{staticClass:"date-wrapper"},[s("date-pick",{attrs:{hasInputElement:!1},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),s("div",{staticClass:"excel-wrapper flex justify-end"},[s("div",{staticClass:"button flex",class:{disabled:!e.date},on:{click:function(t){return e.exportWeekly()}}},[s("img",{attrs:{src:a("79c3")}}),s("div",{staticClass:"value"},[e._v("Download weekly report")])])])])])},Je=[],We=a("f0ca"),Ze=a.n(We),Qe=(a("6f3c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"main",staticClass:"graph entity flex justify-center",class:[e.hue],attrs:{id:e.name+"-entity"}})}),qe=[],Xe=(a("ddb0"),{props:["values","type","name","startDate","nb"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{startDate:function(e){this.updateView(e,this.values)},values:function(e){this.updateView(this.startDate,e)}},data:function(){return{maxValue:0,svg:null,x:null,y:null,y2:null,localIndex:0,slotKeys:["h700","h700_u","h730","h730_u","h800","h800_u","h830","h830_u","h900","h900_u","h930","h930_u","h1000","h1000_u","h1030","h1030_u","h1700","h1700_u","h1730","h1730_u","h1800","h1800_u","h1830","h1830_u","h1900","h1900_u"],onSiteKeys:["onSite","onSite_u","offSite_u"]}},methods:{updateView:function(e,t){var a=this;if(e&&t){var s=a.getDates(e,a.nb),n=a.getMax(t,a.slotKeys),i=a.getMax(t,a.onSiteKeys),r=700,c=300,l={top:10,right:10,bottom:10,left:10},d=r-l.left-l.right,f=c-l.top-l.bottom;o["select"]("#"+a.name+"-entity").selectAll("svg").remove(),a.svg=o["select"]("#"+a.name+"-entity").append("svg").attr("width",r).attr("height",c).append("g").attr("transform","translate("+l.left+","+l.top+")"),a.x=o["scaleLinear"]().domain([0,100*a.nb]).range([0,d]);var v=100*a.nb/d,p=f-160,m=f-25;a.y=o["scaleLinear"]().domain([0,n]).range([p,15]),a.y2=o["scaleLinear"]().domain([0,i]).range([m,p+25]);var h,g=0,b=Object(u["a"])(s);try{for(b.s();!(h=b.n()).done;){var w=h.value;g%200==0&&a.svg.append("rect").attr("x",a.x(g)).attr("y",0).attr("width",a.x(g+100)-a.x(g)).attr("height",f).attr("class","odd");var y,_=Object(u["a"])(t);try{for(_.s();!(y=_.n()).done;){var k=y.value;w==k.date&&(a.localIndex=g,a.addRect(9,p,10*v,k["h700"],"arr def"),a.addRect(12,p,5*v,k["h700_u"],"arr usage"),a.addRect(15,p,10*v,k["h730"],"arr def"),a.addRect(18,p,5*v,k["h730_u"],"arr usage"),a.addRect(21,p,10*v,k["h800"],"arr def"),a.addRect(24,p,5*v,k["h800_u"],"arr usage"),a.addRect(27,p,10*v,k["h830"],"arr def"),a.addRect(30,p,5*v,k["h830_u"],"arr usage"),a.addRect(33,p,10*v,k["h900"],"arr def"),a.addRect(36,p,5*v,k["h900_u"],"arr usage"),a.addRect(39,p,10*v,k["h930"],"arr def"),a.addRect(42,p,5*v,k["h930_u"],"arr usage"),a.addRect(45,p,10*v,k["h1000"],"arr def"),a.addRect(48,p,5*v,k["h1000_u"],"arr usage"),a.addRect(51,p,10*v,k["h1030"],"arr def"),a.addRect(54,p,5*v,k["h1030_u"],"arr usage"),a.svg.append("line").attr("class","sepline").attr("x1",a.x(60+a.localIndex)).attr("y1",0).attr("x2",a.x(60+a.localIndex)).attr("y2",p),a.addRect(63,p,10*v,k["h1700"],"dep def"),a.addRect(66,p,5*v,k["h1700_u"],"dep usage"),a.addRect(69,p,10*v,k["h1730"],"dep def"),a.addRect(72,p,5*v,k["h1730_u"],"dep usage"),a.addRect(75,p,10*v,k["h1800"],"dep def"),a.addRect(78,p,5*v,k["h1800_u"],"dep usage"),a.addRect(81,p,10*v,k["h1830"],"dep def"),a.addRect(84,p,5*v,k["h1830_u"],"dep usage"),a.addRect(87,p,10*v,k["h1900"],"dep def"),a.addRect(90,p,5*v,k["h1900_u"],"dep usage"),a.svg.append("text").attr("x",a.x(a.localIndex+15)).attr("y",f-8).attr("dy",".35em").attr("class","date").text(w),a.svg.append("rect").attr("x",a.x(a.localIndex+10)).attr("y",a.y2(k["onSite"])).attr("width",25).attr("height",m-a.y2(k["onSite"])).attr("class","onSite def"),a.svg.append("rect").attr("x",a.x(a.localIndex+30)).attr("y",a.y2(k["onSite_u"])).attr("width",25).attr("height",m-a.y2(k["onSite_u"])).attr("class","onSite usage"),a.svg.append("rect").attr("x",a.x(a.localIndex+50)).attr("y",a.y2(k["offSite_u"])).attr("width",25).attr("height",m-a.y2(k["offSite_u"])).attr("class","offSite usage"))}}catch(C){_.e(C)}finally{_.f()}g+=100}}catch(C){b.e(C)}finally{b.f()}a.svg.append("line").attr("class","baseline").attr("x1",a.x(0)).attr("y1",p).attr("x2",d).attr("y2",p),a.svg.append("text").attr("x",-10).attr("y",15).attr("dy",".35em").attr("class","max").text(n),a.svg.append("line").attr("class","maxline").attr("x1",a.x(5)).attr("y1",15).attr("x2",d).attr("y2",15),a.svg.append("text").attr("x",a.x(420)).attr("y",5).attr("dy",".35em").attr("class","info").text("arrivals / departures"),a.svg.append("text").attr("x",-10).attr("y",p+25).attr("dy",".35em").attr("class","max").text(i),a.svg.append("line").attr("class","baseline").attr("x1",a.x(5)).attr("y1",m).attr("x2",d).attr("y2",m),a.svg.append("line").attr("class","maxline").attr("x1",a.x(5)).attr("y1",p+25).attr("x2",d).attr("y2",p+25),a.svg.append("text").attr("x",a.x(410)).attr("y",p+15).attr("dy",".35em").attr("class","info").text("limit / on site / off site")}},addRect:function(e,t,a,s,n){var i=this;i.svg.append("rect").attr("x",i.x(e+i.localIndex)).attr("y",i.y(s)).attr("width",a).attr("height",t-i.y(s)).attr("class",n)},getDates:function(e,t){for(var a=[],s=0;s<t;s++)a.push(k()(e).add(s,"days").format("YYYY-MM-DD"));return a},getMax:function(e,t){var a,s=0,n=Object(u["a"])(e);try{for(n.s();!(a=n.n()).done;){var i,r=a.value,c=Object(u["a"])(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;s=Math.max(s,r[l])}}catch(o){c.e(o)}finally{c.f()}}}catch(o){n.e(o)}finally{n.f()}return s}}}),et=Xe,tt=(a("f892"),Object(j["a"])(et,Qe,qe,!1,null,null,null)),at=tt.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"main",staticClass:"graph restaurant flex justify-center",class:[e.hue],attrs:{id:e.name+"-restaurant"}})},nt=[],it={props:["values","type","name","startDate","nb"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{startDate:function(e){this.updateView(e,this.values)},values:function(e){this.updateView(this.startDate,e)}},data:function(){return{maxValue:0,svg:null,x:null,y:null,y2:null,localIndex:0,keys:["h1130","h1130_u","h1200","h1200_u","h1230","h1230_u","h1300","h1300_u","h1330","h1330_u"]}},methods:{updateView:function(e,t){var a=this;if(e&&t){var s=a.getDates(e,a.nb),n=a.getMax(t,a.keys),i=700,r=140,c={top:10,right:10,bottom:10,left:10},l=i-c.left-c.right,d=r-c.top-c.bottom;o["select"]("#"+a.name+"-restaurant").selectAll("svg").remove(),a.svg=o["select"]("#"+a.name+"-restaurant").append("svg").attr("width",i).attr("height",r).append("g").attr("transform","translate("+c.left+","+c.top+")"),a.x=o["scaleLinear"]().domain([0,100*a.nb]).range([0,l]);var f=100*a.nb/l,v=d-15;a.y=o["scaleLinear"]().domain([0,n]).range([v,15]);var p,m=0,h=Object(u["a"])(s);try{for(h.s();!(p=h.n()).done;){var g=p.value;m%200==0&&a.svg.append("rect").attr("x",a.x(m)).attr("y",0).attr("width",a.x(m+100)-a.x(m)).attr("height",d).attr("class","odd");var b,w=Object(u["a"])(t);try{for(w.s();!(b=w.n()).done;){var y=b.value;g==y.date&&(a.localIndex=m,a.addRect(10,v,20*f,y["h1130"],"def"),a.addRect(17,v,10*f,y["h1130_u"],"usage"),a.addRect(24,v,20*f,y["h1200"],"def"),a.addRect(31,v,10*f,y["h1200_u"],"usage"),a.addRect(38,v,20*f,y["h1230"],"def"),a.addRect(45,v,10*f,y["h1230_u"],"usage"),a.addRect(52,v,20*f,y["h1300"],"def"),a.addRect(59,v,10*f,y["h1300_u"],"usage"),a.addRect(66,v,20*f,y["h1330"],"def"),a.addRect(73,v,10*f,y["h1330_u"],"usage"),a.svg.append("text").attr("x",a.x(a.localIndex+15)).attr("y",d-8).attr("dy",".35em").attr("class","date").text(g))}}catch(_){w.e(_)}finally{w.f()}m+=100}}catch(_){h.e(_)}finally{h.f()}a.svg.append("line").attr("class","baseline").attr("x1",a.x(0)).attr("y1",v).attr("x2",l).attr("y2",v),a.svg.append("text").attr("x",-10).attr("y",15).attr("dy",".35em").attr("class","max").text(n),a.svg.append("line").attr("class","maxline").attr("x1",a.x(5)).attr("y1",15).attr("x2",l).attr("y2",15),a.svg.append("text").attr("x",a.x(450)).attr("y",5).attr("dy",".35em").attr("class","info").text("restaurants")}},addRect:function(e,t,a,s,n){var i=this;i.svg.append("rect").attr("x",i.x(e+i.localIndex)).attr("y",i.y(s)).attr("width",a).attr("height",t-i.y(s)).attr("class",n)},getDates:function(e,t){for(var a=[],s=0;s<t;s++)a.push(k()(e).add(s,"days").format("YYYY-MM-DD"));return a},getMax:function(e,t){var a,s=0,n=Object(u["a"])(e);try{for(n.s();!(a=n.n()).done;){var i,r=a.value,c=Object(u["a"])(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;s=Math.max(s,r[l])}}catch(o){c.e(o)}finally{c.f()}}}catch(o){n.e(o)}finally{n.f()}return s}}},rt=it,ct=(a("0458"),Object(j["a"])(rt,st,nt,!1,null,null,null)),lt=ct.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"main",staticClass:"graph parking flex justify-center",class:[e.hue],attrs:{id:e.name+"-parking"}})},ut=[],dt={props:["values","type","name","startDate","nb"],computed:Object(b["a"])({},Object(f["b"])(["hue"])),watch:{startDate:function(e){this.updateView(e,this.values)},values:function(e){this.updateView(this.startDate,e)}},data:function(){return{maxValue:0,svg:null,x:null,y:null,y2:null,localIndex:0,keys:["car","car_u","moto","moto_u","bike","bike_u"]}},methods:{updateView:function(e,t){var a=this;if(e&&t){var s=a.getDates(e,a.nb),n=a.getMax(t,a.keys),i=700,r=140,c={top:10,right:10,bottom:10,left:10},l=i-c.left-c.right,d=r-c.top-c.bottom;o["select"]("#"+a.name+"-parking").selectAll("svg").remove(),a.svg=o["select"]("#"+a.name+"-parking").append("svg").attr("width",i).attr("height",r).append("g").attr("transform","translate("+c.left+","+c.top+")"),a.x=o["scaleLinear"]().domain([0,100*a.nb]).range([0,l]);var f=100*a.nb/l,v=d-15;a.y=o["scaleLinear"]().domain([0,n]).range([v,15]);var p,m=0,h=Object(u["a"])(s);try{for(h.s();!(p=h.n()).done;){var g=p.value;m%200==0&&a.svg.append("rect").attr("x",a.x(m)).attr("y",0).attr("width",a.x(m+100)-a.x(m)).attr("height",d).attr("class","odd");var b,w=Object(u["a"])(t);try{for(w.s();!(b=w.n()).done;){var y=b.value;g==y.date&&(a.localIndex=m,a.addRect(10,v,20*f,y["car"],"def"),a.addRect(17,v,10*f,y["car_u"],"usage"),a.addRect(24,v,20*f,y["moto"],"def"),a.addRect(31,v,10*f,y["moto_u"],"usage"),a.addRect(38,v,20*f,y["bike"],"def"),a.addRect(45,v,10*f,y["bike_u"],"usage"),a.svg.append("text").attr("x",a.x(a.localIndex+15)).attr("y",d-8).attr("dy",".35em").attr("class","date").text(g))}}catch(_){w.e(_)}finally{w.f()}m+=100}}catch(_){h.e(_)}finally{h.f()}a.svg.append("line").attr("class","baseline").attr("x1",a.x(0)).attr("y1",v).attr("x2",l).attr("y2",v),a.svg.append("text").attr("x",-10).attr("y",15).attr("dy",".35em").attr("class","max").text(n),a.svg.append("line").attr("class","maxline").attr("x1",a.x(5)).attr("y1",15).attr("x2",l).attr("y2",15),a.svg.append("text").attr("x",a.x(420)).attr("y",5).attr("dy",".35em").attr("class","info").text("car / moto / bicycle")}},addRect:function(e,t,a,s,n){var i=this;i.svg.append("rect").attr("x",i.x(e+i.localIndex)).attr("y",i.y(s)).attr("width",a).attr("height",t-i.y(s)).attr("class",n)},getDates:function(e,t){for(var a=[],s=0;s<t;s++)a.push(k()(e).add(s,"days").format("YYYY-MM-DD"));return a},getMax:function(e,t){var a,s=0,n=Object(u["a"])(e);try{for(n.s();!(a=n.n()).done;){var i,r=a.value,c=Object(u["a"])(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;s=Math.max(s,r[l])}}catch(o){c.e(o)}finally{c.f()}}}catch(o){n.e(o)}finally{n.f()}return s}}},ft=dt,vt=(a("c5c0"),Object(j["a"])(ft,ot,ut,!1,null,null,null)),pt=vt.exports,mt={store:jt,components:{SiteReport:at,RestaurantReport:lt,ParkingReport:pt,DatePick:Ze.a},computed:Object(b["a"])({},Object(f["b"])(["hue","sites","siteDefinitions","restaurants","restaurantDefinitions","parkings","parkingDefinitions"])),watch:{date:function(e){this.updateDataReport(e||k()().format("YYYY-MM-DD"))}},data:function(){return{reportSite:null,date:null,siteData:{},restaurantData:{},parkingData:{}}},methods:{setReportSite:function(e){this.reportSite=e,this.reportRestaurant=null},setReportRestaurant:function(e){this.reportRestaurant=e,this.reportSite=null},updateDataReport:function(e){var t=this;if(t.sites){var a,s=Object(u["a"])(t.sites);try{var n=function(){var s=a.value;p.a.get("api/usage/site/"+s.definition.id+"?startDate="+e+"&limit=4").then((function(e){t.siteData[s.definition.id]=e.data,t.$forceUpdate()}))};for(s.s();!(a=s.n()).done;)n()}catch(f){s.e(f)}finally{s.f()}}if(t.restaurants){var i,r=Object(u["a"])(t.restaurants);try{var c=function(){var a=i.value;p.a.get("api/usage/restaurant/"+a.definition.id+"?startDate="+e+"&limit=4").then((function(e){t.restaurantData[a.definition.id]=e.data,t.$forceUpdate()}))};for(r.s();!(i=r.n()).done;)c()}catch(f){r.e(f)}finally{r.f()}}if(t.parkings){var l,o=Object(u["a"])(t.parkings);try{var d=function(){var a=l.value;p.a.get("api/usage/parking/"+a.definition.id+"?startDate="+e+"&limit=4").then((function(e){t.parkingData[a.definition.id]=e.data,t.$forceUpdate()}))};for(o.s();!(l=o.n()).done;)d()}catch(f){o.e(f)}finally{o.f()}}},exportWeekly:function(){this.date&&(window.location.href="/api/report/weekly?startDate="+this.date)}}},ht=mt,gt=(a("2944"),Object(j["a"])(ht,Ke,Je,!1,null,"3642ed6d",null)),bt=gt.exports,wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full",attrs:{id:"denied"}},[a("div",{staticClass:"main flex justify-center"},[a("font-awesome-icon",{attrs:{icon:"user-lock"}}),a("div",{staticClass:"title"},[e._v("Access denied")])],1),a("div",{staticClass:"content"},[e._v(" You do not have access to the application: please contact the HR department if needed. ")])])},yt=[],_t=(a("d5a7"),{}),kt=Object(j["a"])(_t,wt,yt,!1,null,"7acdbc7e",null),Ct=kt.exports;s["a"].use(m["a"]);var St=[{path:"/",name:"Home",component:se},{path:"/settings",name:"Settings",component:oe,beforeEnter:function(e,t,a){jt.dispatch("loadSettings"),jt.dispatch("loadUserRoles"),a()}},{path:"/sites",name:"Sites",component:ke},{path:"/restaurants",name:"Restaurants",component:Ne},{path:"/parkings",name:"Parkings",component:He},{path:"/reports",name:"Reports",component:bt},{path:"/denied",name:"Denied",component:Ct}],xt=new m["a"]({routes:St}),Rt=xt;s["a"].use(f["a"]);var jt=new f["a"].Store({state:{hue:"light",user:null,settings:[],userRoles:null,overridenUser:null,info:null,sites:[],restaurants:[],parkings:[],selectedSite:null,selectedRestaurant:null,selectedParking:null,siteUsages:[],restaurantUsages:[],parkingUsages:[],currentUserUsages:[]},mutations:{SET_HUE:function(e,t){e.hue=t},SET_USER:function(e,t){e.user=t},SET_SETTINGS:function(e,t){e.settings=t},SET_OVERRIDEN_USER:function(e,t){e.overridenUser=t},SET_INFO:function(e,t){e.info=t},SET_SITES:function(e,t){e.sites=t},SET_RESTAURANTS:function(e,t){e.restaurants=t},SET_PARKINGS:function(e,t){e.parkings=t},SET_SELECTED_SITE:function(e,t){e.selectedSite=t},SET_SELECTED_RESTAURANT:function(e,t){e.selectedRestaurant=t},SET_SELECTED_PARKING:function(e,t){e.selectedParking=t},SET_SITE_USAGES:function(e,t){e.siteUsages=t},SET_RESTAURANT_USAGES:function(e,t){e.restaurantUsages=t},SET_PARKING_USAGES:function(e,t){e.parkingUsages=t},SET_USER_ROLES:function(e,t){e.userRoles=t},SET_CURRENT_USER_USAGES:function(e,t){e.currentUserUsages=t},LOAD_LOCALSTORAGE:function(e){localStorage.getItem("state")&&Object.assign(e,JSON.parse(localStorage.getItem("state")))},CHANGE_HUE:function(e){e.hue="light"===e.hue?"dark":"light",localStorage.setItem("state",JSON.stringify({hue:e.hue}))}},actions:{setInfo:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,s("SET_INFO",t),setTimeout((function(){s("SET_INFO",null)}),3e3);case 3:case"end":return a.stop()}}),a)})))()},getUserInfo:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,s=e.dispatch,p.a.get("api/auth/userInfo").then((function(e){e.data&&e.data.login&&e.data.role&&"none"!=e.data.role?(a("SET_USER",e.data),s("loadCurrentUserUsages")):Rt.push("/denied")})).catch((function(e){a("SET_INFO","Error: "+e.message),Rt.push("/denied")}));case 2:case"end":return t.stop()}}),t)})))()},loadSettings:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,p.a.get("api/settings").then((function(e){a("SET_SETTINGS",e.data.settings)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},saveSettings:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,p.a.post("api/settings",{settings:t}).then((function(e){s("SET_SETTINGS",e.data.settings),n("setInfo","Settings saved")})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadSites:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,p.a.get("api/site/all").then((function(e){a("SET_SITES",e.data)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},loadRestaurants:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,p.a.get("api/restaurant/all").then((function(e){a("SET_RESTAURANTS",e.data)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},loadParkings:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,p.a.get("api/parking/all").then((function(e){a("SET_PARKINGS",e.data)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},changeOverridenUser:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,s("SET_OVERRIDEN_USER",t),t?n("reloadAll"):window.location.href="/";case 3:case"end":return a.stop()}}),a)})))()},changeSelectedSite:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,t&&(s("SET_SELECTED_SITE",t),n("loadSiteUsages",t));case 2:case"end":return a.stop()}}),a)})))()},changeSelectedRestaurant:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,t&&(s("SET_SELECTED_RESTAURANT",t),n("loadRestaurantUsages",t));case 2:case"end":return a.stop()}}),a)})))()},changeSelectedParking:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,t&&(s("SET_SELECTED_PARKING",t),n("loadParkingUsages",t));case 2:case"end":return a.stop()}}),a)})))()},loadSiteUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,t&&p.a.get("api/usage/site/"+t).then((function(e){s("SET_SITE_USAGES",e.data)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadRestaurantUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,t&&p.a.get("api/usage/restaurant/"+t).then((function(e){s("SET_RESTAURANT_USAGES",e.data)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadParkingUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,t&&p.a.get("api/usage/parking/"+t).then((function(e){s("SET_PARKING_USAGES",e.data)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.state,i=e.dispatch,t||(n.overridenUser?t=n.overridenUser:n.user&&(t=n.user.login)),t&&p.a.get("api/day/user/"+t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data),!n.selectedSite&&e.data&&e.data.length>0&&i("changeSelectedSite",e.data[0].siteId)})).catch((function(e){s("SET_INFO","Error: "+e.message+" (while retrieving current user usages)")}));case 3:case"end":return a.stop()}}),a)})))()},saveCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,i=e.state,p.a.post("api/day",t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data.userDays),n("setInfo","working days updated"),n("loadSiteUsages",i.selectedSite)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},deleteCurrentUserUsages:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.commit,n=e.dispatch,i=e.state,p.a.post("api/day/delete",t).then((function(e){s("SET_CURRENT_USER_USAGES",e.data.userDays),n("setInfo","working days updated"),n("loadSiteUsages",i.selectedSite)})).catch((function(e){s("SET_INFO","Error: "+e.message)}));case 2:case"end":return a.stop()}}),a)})))()},loadUserRoles:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,p.a.get("api/role/all").then((function(e){a("SET_USER_ROLES",e.data.userRoles)})).catch((function(e){a("SET_INFO","Error: "+e.message)}));case 2:case"end":return t.stop()}}),t)})))()},saveUserRoles:function(e,t){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=e.commit,p.a.post("api/role/all",{userRoles:t}).then((function(e){n("SET_USER_ROLES",e.data.userRoles),a.dispatch("setInfo","User roles saved")})).catch((function(e){n("SET_INFO","Error: "+e.message)}));case 2:case"end":return s.stop()}}),s)})))()},reloadAll:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.dispatch,a("loadSettings"),a("loadSites"),a("loadRestaurants"),a("loadParkings"),a("loadSiteUsages"),a("loadRestaurantUsages"),a("loadParkingUsages"),a("getUserInfo");case 9:case"end":return t.stop()}}),t)})))()}},getters:{hue:function(e){return e.hue},settings:function(e){return e.settings},info:function(e){return e.info},sites:function(e){return e.sites},siteDefinitions:function(e){var t=[];if(e.sites){var a,s=Object(u["a"])(e.sites);try{for(s.s();!(a=s.n()).done;){var n=a.value;t.push(n.definition)}}catch(i){s.e(i)}finally{s.f()}}return t},siteUsages:function(e){return e.siteUsages},selectedSite:function(e){return e.selectedSite},restaurants:function(e){return e.restaurants},restaurantDefinitions:function(e){var t=[];if(e.restaurants){var a,s=Object(u["a"])(e.restaurants);try{for(s.s();!(a=s.n()).done;){var n=a.value;t.push(n.definition)}}catch(i){s.e(i)}finally{s.f()}}return t},restaurantUsages:function(e){return e.restaurantUsages},selectedRestaurant:function(e){return e.selectedRestaurant},parkings:function(e){return e.parkings},parkingDefinitions:function(e){var t=[];if(e.parkings){var a,s=Object(u["a"])(e.parkings);try{for(s.s();!(a=s.n()).done;){var n=a.value;t.push(n.definition)}}catch(i){s.e(i)}finally{s.f()}}return t},parkingUsages:function(e){return e.parkingUsages},selectedParking:function(e){return e.selectedParking},user:function(e){return e.user},userName:function(e){return e.userName},overridenUser:function(e){return e.overridenUser},currentUser:function(e){return null!=e.overridenUser?e.overridenUser:e.user.login},userRoles:function(e){return e.userRoles},currentUserUsages:function(e){return e.currentUserUsages}},modules:{}}),Ut=a("4a7a"),Ot=a.n(Ut),Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.hue],attrs:{id:"app"}},[a("NavBar"),a("div",{staticClass:"container mx-auto flex"},[a("LeftMenu"),a("router-view")],1)],1)},Et=[],Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:[e.hue],attrs:{id:"navBar"}},[s("div",{staticClass:"main-container container flex justify-between mx-auto px-1"},[s("div",{staticClass:"logo flex select-none",on:{click:function(t){return e.sendToHome()}}},[s("img",{attrs:{src:a("cf05")}}),e._m(0)]),s("div",{staticClass:"actionBar flex"},[e.user?s("div",{staticClass:"user select-none cursor-pointer"},[s("div",{staticClass:"menu flex justify-end",on:{click:function(t){e.menuExpanded=!e.menuExpanded}}},[s("div",{staticClass:"content flex"},[s("font-awesome-icon",{staticClass:"user-logo",attrs:{icon:"user-circle"}}),s("div",{staticClass:"user-name"},[s("div",{staticClass:"name"},[e._v(e._s(e.user.firstName+" "+e.user.lastName))]),""!=e.overridenUser?s("div",{staticClass:"overriden flex justify-end"},[s("span",[e._v(e._s(e.overridenUser))])]):e._e()]),"admin"==e.user.role?[e.menuExpanded?e._e():s("font-awesome-icon",{staticClass:"menu-caret",attrs:{icon:"caret-up"}}),e.menuExpanded?s("font-awesome-icon",{staticClass:"menu-caret",attrs:{icon:"caret-down"}}):e._e()]:e._e()],2)]),e.menuExpanded&&null!=e.user&&"admin"==e.user.role?s("div",{staticClass:"menu-content"},[s("div",{staticClass:"text-left"},[s("label",{staticClass:"text-xs",attrs:{for:"override-input"}},[e._v("Override")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.overridenUserInput,expression:"overridenUserInput"}],staticClass:"appearance-none block w-full border rounded py-1 px-2 leading-tight focus:outline-none focus:border-gray-500",attrs:{id:"override-input",type:"text",placeholder:"..."},domProps:{value:e.overridenUserInput},on:{input:function(t){t.target.composing||(e.overridenUserInput=t.target.value)}}})]),s("div",{staticClass:"buttons text-right"},[s("span",{staticClass:"button stop",on:{click:function(t){return e.stopOverride()}}},[e._v("stop")]),s("span",{staticClass:"button apply",on:{click:function(t){return e.applyOverride(e.overridenUserInput)}}},[e._v("apply")])])]):e._e()]):e._e(),s("div",{staticClass:"hue"},[s("toggle-button",{staticClass:"hueButton",attrs:{height:14,width:28,color:{checked:"#AAAAAA",unchecked:"#3c4f54",disabled:"#aaaaaa"}},on:{change:e.changeHue}})],1)])]),null!=e.info?s("div",{staticClass:"info",class:e.infoType,on:{mouseover:function(t){return e.removeInfo()}}},[s("font-awesome-icon",{staticClass:"user-logo",attrs:{icon:"times-circle"},on:{click:function(t){return e.removeInfo()}}}),s("span",[e._v(e._s(e.info))])],1):e._e()])},At=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"post"},[e._v("#OnSite")]),a("span",{staticClass:"covid"},[e._v("Management")])])}],Nt=(a("baa5"),{name:"NavBar",store:jt,computed:Object(b["a"])({},Object(f["b"])(["hue","user","overridenUser","info"])),watch:{info:function(e){e&&(0===e.lastIndexOf("Warning",0)?this.infoType="warn":0===e.lastIndexOf("Error",0)?this.infoType="error":this.infoType="success")}},data:function(){return{menuExpanded:!1,overridenUserInput:null,infoType:"warn"}},mounted:function(){},methods:{sendToHome:function(){window.location.href="/"},changeHue:function(){jt.commit("CHANGE_HUE")},removeInfo:function(){jt.commit("SET_INFO",null)},stopOverride:function(){S.$emit("clearPendingActions"),jt.dispatch("changeOverridenUser",null),this.menuExpanded=!1},applyOverride:function(e){S.$emit("clearPendingActions"),jt.dispatch("changeOverridenUser",e),this.menuExpanded=!1,"/"!=this.$route.path&&this.$router.push({path:"/"})}}}),Tt=Nt,It=(a("c93f"),Object(j["a"])(Tt,Dt,At,!1,null,"057bff7c",null)),Mt=It.exports,$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-none",class:[e.hue],attrs:{id:"leftMenu"}},[e.user?a("div",{staticClass:"user-menu"},[a("div",{staticClass:"item",class:{selected:"/"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/"}},[a("font-awesome-icon",{attrs:{icon:"chalkboard"}}),a("span",[e._v("Home")])],1)],1)]):e._e(),null!=e.user&&"admin"==e.user.role&&null==e.overridenUser?a("div",{staticClass:"admin-menu"},[a("div",{staticClass:"title"},[e._v("Admin")]),a("div",{staticClass:"item",class:{selected:"/settings"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/settings"}},[a("font-awesome-icon",{attrs:{icon:"cogs"}}),a("span",[e._v("Settings")])],1)],1),a("div",{staticClass:"item",class:{selected:"/sites"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/sites"}},[a("font-awesome-icon",{attrs:{icon:"city"}}),a("span",[e._v("Sites")])],1)],1),a("div",{staticClass:"item",class:{selected:"/restaurants"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/restaurants"}},[a("font-awesome-icon",{attrs:{icon:"utensils"}}),a("span",[e._v("Restaurants")])],1)],1),a("div",{staticClass:"item",class:{selected:"/parkings"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/parkings"}},[a("font-awesome-icon",{attrs:{icon:"parking"}}),a("span",[e._v("Parkings")])],1)],1)]):e._e(),null==e.user||"admin"!=e.user.role&&"reporter"!=e.user.role||null!=e.overridenUser?e._e():a("div",{staticClass:"report-menu"},[a("div",{staticClass:"title"},[e._v("Reporting")]),a("div",{staticClass:"item",class:{selected:"/reports"===e.currentRoute}},[a("router-link",{staticClass:"nav-link w-auto",attrs:{to:"/reports"}},[a("font-awesome-icon",{attrs:{icon:"poll"}}),a("span",[e._v("General")])],1)],1)])])},Ft=[],Yt={computed:Object(b["a"])({},Object(f["b"])(["hue","user","overridenUser"])),data:function(){return{currentRoute:"/"}},watch:{$route:function(e){this.currentRoute=e.path}},mounted:function(){this.currentRoute=this.$route.path}},Lt=Yt,Gt=(a("0cc7"),Object(j["a"])(Lt,$t,Ft,!1,null,"6f5afe40",null)),Vt=Gt.exports,zt={components:{NavBar:Mt,LeftMenu:Vt},store:jt,computed:Object(b["a"])({},Object(f["b"])(["hue"])),mounted:function(){jt.dispatch("reloadAll")}},Bt=zt,Ht=(a("5c0b"),Object(j["a"])(Bt,Pt,Et,!1,null,null,null)),Kt=Ht.exports;a("def6"),a("6dfc");s["a"].config.productionTip=!1,n["c"].add(i["b"],i["e"],i["g"],i["h"],i["i"],i["o"],i["l"],i["d"],i["w"],i["B"],i["E"],i["z"],i["F"],i["A"],i["s"],i["t"],i["G"],i["C"],i["D"],i["I"],i["q"],i["m"],i["j"],i["k"],i["x"],i["y"],i["n"],i["v"],i["a"],i["u"],i["f"],i["c"],i["J"],i["H"],i["r"],i["p"]),s["a"].component("font-awesome-icon",r["a"]),s["a"].use(l.a),s["a"].component("v-select",Ot.a),s["a"].use(o),new s["a"]({router:Rt,store:jt,render:function(e){return e(Kt)},beforeCreate:function(){this.$store.commit("LOAD_LOCALSTORAGE")}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),n=a.n(s);n.a},"5c41":function(e,t,a){},6472:function(e,t,a){},"66a4":function(e,t,a){},6780:function(e,t,a){"use strict";var s=a("35c6"),n=a.n(s);n.a},7419:function(e,t,a){"use strict";var s=a("ddbe"),n=a.n(s);n.a},"79c3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADpElEQVRoge2Zf2hVZRjHP++5u8ctp86mi41Q29TZflj3nsjGJl6VVoaTLf1HiszGEiESQZZpg8GIQJuKYRLZH00tS1BbzbnRRMWpaeyPaeQiC6QoRtvwKmy13fP2x8WT695zPWfnXu/E84EL932f933e5/ue9+F9z3vAxcXFJZmIRDn21ftyQrrQAA2JJkG73NCVE+9xUpw6CNQHUgZCA/kSJRwsogDwhUJk3tkuUTNlS0B+bemkVO/QE7oiCwSyEND6Q0ENPKkJiu+umAoo3lw8VfGohVKggdSkQBMMzpOghGczYavPFqYChNfbL5H/leMw2PKjlfLurSKRQna2VH5VFs2mOAvp3iCkKDWz3RcCYuEKSDaO9wE7fF151Phfcawqou7/3G4TiwfnCbxUspraZZuM8ubDW2m9fMIoZzyUwfGNzUycMBGAxradNHUeiGOo0bEs4NB3X1Llr2TOI7MBeD1QTduVdnSpA7AuUGMEf633Gp9dOBThI9qSsLJMYmF5CYX0ENta3zfKudNzWTg3vLfkZOSw6qkXAZBS8l7LNkZCI44Cs4qtJL74yyVO/niKJY8HAKhZVM3pnjO8sXQ9aooKQEv3cS79+n3U/uMiiRtP7ODvkX8AKH60iPKiZ1k2/3kAbg7dZEfbLrsuHWFbwG8Dv9PUud8o11VsQRFhN3s69tJ3qz9+0VnA9Iw2v85vevBKU9NofvMIWZOzjLqrf/Sw+qOX0XXddLAZ/hljjZNvqo5FjXVM+4BH8UTUTUmbjOpRx+LOEWPaiTeWbzBm/69bfUxLzyQ7I5vqhWvZc3Kvab9xkcTaLD8rtbDjoeEhGprfNWyvlr3CzMyZdl06wpYANUXlnYotCBFejgfPf86pq6c59/N5w/728rfiH2UMbC2hmkXV5E5/DIDgYJBPO5sA2NW+m2fyFqAIhZK8BTxXVE7blfaI/kndiWdn5bG2bI1R/vjMJ9wYDALQ8+dPfPtDh2GrfWET6anpjgKziqUnoAiFuhVb8Xq8APQGe/ni4uFRbT7o+JClBUvwKB6mpWeyfvE6trc2jmqTiCS2JECXOmv2vRazzfW+6/jrn7biLq48OO8D8SCpSTxecQUkm/tFwFkzg2kSy+HhhyMvd5mHA9FmR2In2HKYX1s6SZ0wOPf21Xr4JzTA0vV6d0NXcgVE484PHEIoBVLKQqAERn/ggHEqwMxvYb0/T9GFT6D7kOJJwNfd0JWdoPFcXFxcksS/44wNWFr5JHcAAAAASUVORK5CYII="},"7b66":function(e,t,a){},"7ca9":function(e,t,a){},8892:function(e,t,a){"use strict";var s=a("6472"),n=a.n(s);n.a},"9c0c":function(e,t,a){},b280:function(e,t,a){"use strict";var s=a("fb71"),n=a.n(s);n.a},b4af:function(e,t,a){},baed:function(e,t,a){},bf50:function(e,t,a){"use strict";var s=a("7b66"),n=a.n(s);n.a},c498:function(e,t,a){},c5c0:function(e,t,a){"use strict";var s=a("baed"),n=a.n(s);n.a},c93f:function(e,t,a){"use strict";var s=a("2554"),n=a.n(s);n.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.7b2cf7e0.png"},d5a7:function(e,t,a){"use strict";var s=a("c498"),n=a.n(s);n.a},ddbe:function(e,t,a){},def6:function(e,t,a){},e127:function(e,t,a){"use strict";var s=a("b4af"),n=a.n(s);n.a},e6e0:function(e,t,a){"use strict";var s=a("2d93"),n=a.n(s);n.a},f756:function(e,t,a){},f892:function(e,t,a){"use strict";var s=a("4783"),n=a.n(s);n.a},fb71:function(e,t,a){}});
//# sourceMappingURL=app.c0549a77.js.map